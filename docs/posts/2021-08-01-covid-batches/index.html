<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Data Analysis Hub: Three ways to visualize binary survey data</title>

<meta property="description" itemprop="description" content="You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let&#39;s talk data visualization options."/>

<link rel="canonical" href="https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/"/>
<link rel="icon" type="image/png" href="../../images/favicon/favicon-32x32.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-08-01"/>
<meta property="article:created" itemprop="dateCreated" content="2021-08-01"/>
<meta name="article:author" content="Tayler Nelson"/>
<meta name="article:author" content="Matt Gunther"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Data Analysis Hub: Three ways to visualize binary survey data"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let&#39;s talk data visualization options."/>
<meta property="og:url" content="https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/"/>
<meta property="og:image" content="https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/images/preview2.png"/>
<meta property="og:image:width" content="1134"/>
<meta property="og:image:height" content="872"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Data Analysis Hub"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Data Analysis Hub: Three ways to visualize binary survey data"/>
<meta property="twitter:description" content="You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let&#39;s talk data visualization options."/>
<meta property="twitter:url" content="https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/"/>
<meta property="twitter:image" content="https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/images/preview2.png"/>
<meta property="twitter:image:width" content="1134"/>
<meta property="twitter:image:height" content="872"/>
<meta property="twitter:site" content="@ipumsGH"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","output","preview","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Three ways to visualize binary survey data"]},{"type":"character","attributes":{},"value":["You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let's talk data visualization options."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation"]}},"value":[{"type":"character","attributes":{},"value":["Tayler Nelson"]},{"type":"character","attributes":{},"value":["IPUMS PMA Graduate Research Assistant"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation"]}},"value":[{"type":"character","attributes":{},"value":["Matt Gunther"]},{"type":"character","attributes":{},"value":["IPUMS PMA Senior Data Analyst"]}]}]},{"type":"character","attributes":{},"value":["08-01-2021"]},{"type":"character","attributes":{},"value":["COVID-19","Data Visualization","ggplot2","fmsb","Bar Charts","Lollipop Charts","Radar Charts"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["images/preview2.png"]},{"type":"character","attributes":{},"value":["https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["covid-batches_files/anchor-4.2.2/anchor.min.js","covid-batches_files/bowser-1.9.3/bowser.min.js","covid-batches_files/distill-2.2.21/template.v2.js","covid-batches_files/figure-html5/unnamed-chunk-12-1.png","covid-batches_files/figure-html5/unnamed-chunk-13-1.png","covid-batches_files/figure-html5/unnamed-chunk-14-1.png","covid-batches_files/figure-html5/unnamed-chunk-15-1.png","covid-batches_files/figure-html5/unnamed-chunk-16-1.png","covid-batches_files/figure-html5/unnamed-chunk-17-1.png","covid-batches_files/figure-html5/unnamed-chunk-18-1.png","covid-batches_files/figure-html5/unnamed-chunk-19-1.png","covid-batches_files/figure-html5/unnamed-chunk-20-1.png","covid-batches_files/figure-html5/unnamed-chunk-20-2.png","covid-batches_files/figure-html5/unnamed-chunk-20-3.png","covid-batches_files/figure-html5/unnamed-chunk-20-4.png","covid-batches_files/figure-html5/unnamed-chunk-20-5.png","covid-batches_files/figure-html5/unnamed-chunk-20-6.png","covid-batches_files/figure-html5/unnamed-chunk-21-1.png","covid-batches_files/figure-html5/unnamed-chunk-21-2.png","covid-batches_files/figure-html5/unnamed-chunk-21-3.png","covid-batches_files/figure-html5/unnamed-chunk-21-4.png","covid-batches_files/figure-html5/unnamed-chunk-21-5.png","covid-batches_files/figure-html5/unnamed-chunk-21-6.png","covid-batches_files/figure-html5/unnamed-chunk-22-1.png","covid-batches_files/figure-html5/unnamed-chunk-23-1.png","covid-batches_files/figure-html5/unnamed-chunk-24-1.png","covid-batches_files/figure-html5/unnamed-chunk-25-1.png","covid-batches_files/figure-html5/unnamed-chunk-26-1.png","covid-batches_files/figure-html5/unnamed-chunk-4-1.png","covid-batches_files/figure-html5/unnamed-chunk-5-1.png","covid-batches_files/figure-html5/unnamed-chunk-6-1.png","covid-batches_files/figure-html5/unnamed-chunk-7-1.png","covid-batches_files/figure-html5/unnamed-chunk-8-1.png","covid-batches_files/header-attrs-2.9/header-attrs.js","covid-batches_files/jquery-1.11.3/jquery.min.js","covid-batches_files/webcomponents-2.0.0/webcomponents.js","data/pma_00032.dat.gz","data/pma_00032.xml","fonts/cabritosanscondbold-webfont.ttf","fonts/cabritosansconddemi-webfont.ttf","fonts/cabritosansnormregular-webfont.ttf","images/divergent.png","images/faceted.png","images/preview.png","images/preview2.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */

@import url('https://assets.ipums.org/_css/font-faces.css');

html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #00263A;
  --header-color:    #00263A;
  --body-color:      #00263A;
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    cabrito_sans_norm_regular;
  --mono-font:       Menlo, Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-font:       cabrito_sans_norm_regular;
  --navbar-font:     cabrito_sans_norm_regular;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #00263A;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #00263A;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

h1{
  font-family: 'cabrito_sans_norm_regular';
  text-transform: uppercase;
  color: #00263A;
}

d-title h1{
  font-weight: 500;
}

d-article h1{
  font-size: 36px;
  line-height: 1.1em;
  font-weight: 100;
}

d-article h2{
    font-size: 30px;
    font-family: "cabrito_sans_cond_demi";
    text-transform: uppercase;
    color: #00263A;
    font-weight: 100;
}

d-article h3{
  font-size: 26px;
  font-family: 'cabrito_sans_cond_demi';
  color: #00263A;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article h4{
  font-size: 24px;
  font-family: 'cabrito_sans_norm_regular';
  color: #00263A;
  text-transform: unset;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article h5{
  font-size: 24px;
  font-family: 'cabrito_sans_cond_demi';
  color: #00263A;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article li {
    margin-bottom: 0;
    margin-left: 1rem;
    padding-left: 0;
    color: #00263A;
}

d-article table {
    color: #00263A;
}
.d-contents nav > ul > li > a {
    font-weight: 100;
}

body{
  font-family: 'cabrito_subset';
}

b, strong {
  font-family: "cabrito_sans_cond_demi";
  font-weight: 100;
}

p>a {
    color: #98579B
}

li>a {
    color: #98579B;
}

.btn {
    font-family: "cabrito_subset";
    font-size: 16px;
    background-color: #F0E6F0;
    margin-bottom: 20px;
    border-width: 1px;
    padding-top: 6px;
    padding-bottom: 6px;
    cursor: pointer;
}

.distill-site-header .title {
    text-transform: uppercase;
    line-height: 38px;
    vertical-align: middle;
}

.distill-site-header .logo img{
  max-height: 50px; /* Makes logo bigger, default was 20px */
  vertical-align: middle;
  margin-bottom: 0;
}

.distill-site-header .nav-right {
    float: right;
    line-height: 38px;
    vertical-align: middle;
}

.distill-site-header .nav-left {
    display: inline-block;
    line-height: 38px;
    vertical-align: middle;
}

.algolia-autocomplete {
  line-height: 25px;
}

d-article iframe {
    border: 0;
    margin-bottom: 0;
    width: 100%;
}

d-article aside a {
  color: #98579B;
}

@media(max-width: 767px){
  aside{
    width: 50%;
    position: relative;
    left: 25%;
    padding-bottom: 20px;
  }
}

code {
  font-family: Menlo, Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

/* Prevent leaflet widgets from appearing above navbar */ 
.header {
  z-index: 1001;
}

d-article iframe {
  margin-bottom: 2em;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.9/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script type="text/javascript" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-191039907-2"></script>
<script type="text/javascript" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-191039907-2');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Three ways to visualize binary survey data","description":"You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let's talk data visualization options.","authors":[{"author":"Tayler Nelson","authorURL":"#","affiliation":"IPUMS PMA Graduate Research Assistant","affiliationURL":"#","orcidID":""},{"author":"Matt Gunther","authorURL":"#","affiliation":"IPUMS PMA Senior Data Analyst","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-08-01T00:00:00.000-04:00","citationText":"Nelson & Gunther, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://pma.ipums.org/pma/">
<img src="../../images/logo-white.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Data Analysis Hub</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Posts</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Courses
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../introduction.html">Introduction to IPUMS PMA Data Analysis</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
R Tips
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../posts/2020-12-10-get-ipums-pma-data/index.html">Import IPUMS PMA Data into R</a>
<a href="../../posts/2020-12-10-get-r-and-packages/index.html">R, RStudio, and R Packages</a>
<a href="../../posts/2021-11-15-find-an-example/index.html">Find an Example</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Community
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../CONTRIBUTING.html">Contributing guide</a>
<a href="../../CODE_OF_CONDUCT.html">Code of conduct</a>
<a href="../../LICENSE.html">License</a>
<a href="https://github.com/ipums/pma-data-hub/">GitHub</a>
</div>
</div>
<a href="../../about.html">About</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="https://twitter.com/ipumsGH">
<i class="fab fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/ipums/pma-data-hub" aria-label="Link to source">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Three ways to visualize binary survey data</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:COVID-19" class="dt-tag">COVID-19</a>
  <a href="../../index.html#category:Data_Visualization" class="dt-tag">Data Visualization</a>
  <a href="../../index.html#category:ggplot2" class="dt-tag">ggplot2</a>
  <a href="../../index.html#category:fmsb" class="dt-tag">fmsb</a>
  <a href="../../index.html#category:Bar_Charts" class="dt-tag">Bar Charts</a>
  <a href="../../index.html#category:Lollipop_Charts" class="dt-tag">Lollipop Charts</a>
  <a href="../../index.html#category:Radar_Charts" class="dt-tag">Radar Charts</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>You can compare levels of trust and efficacy for 13 information sources in 4 countries with data from the new PMA COVID-19 survey. Let’s talk data visualization options.</p></p>
</div>

<div class="d-byline">
  Tayler Nelson  (IPUMS PMA Graduate Research Assistant)
  
,   Matt Gunther  (IPUMS PMA Senior Data Analyst)
  
<br/>08-01-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#setup">Setup</a>
<ul>
<li><a href="#logical-variables">Logical variables</a></li>
<li><a href="#using-dplyracross">Using dplyr::across</a></li>
</ul></li>
<li><a href="#pre-processing">Pre-processing</a>
<ul>
<li><a href="#summary-table">Summary Table</a></li>
<li><a href="#plot-theme">Plot theme</a></li>
</ul></li>
<li><a href="#bar-charts">Bar Charts</a></li>
<li><a href="#lollipop-chart">Lollipop Chart</a></li>
<li><a href="#radar-chart">Radar Chart</a></li>
<li><a href="#wrap-up">Wrap-up</a></li>
</ul>
</nav>
</div>
<p>In our <a href="../2021-07-15-covid-likert">last post</a>, we discussed some of the strategies you might use to compare items from the <a href="https://www.pmadata.org/technical-areas/covid-19">PMA COVID-19 questionnaire</a> that use a Likert-type response scale. Another type of question used in the COVID-19 survey - and all PMA surveys - follows the “select all that apply” format. Responses from this type of question appear as a series of related binary (“yes” or “no”) variables on the <a href="https://pma.ipums.org/pma/index.shtml">IPUMS PMA</a> website.</p>
<p>In this post, we’ll go over some of the strategies you might use to <strong>process and synthesize data from a large number of related variables</strong>, like those created from “select all that apply” style questions. First, we’ll review one of our favorite tools for manipulating lots of variables at once: the <a href="https://dplyr.tidyverse.org/reference/across.html">across</a> function from <a href="https://dplyr.tidyverse.org/">dplyr</a>. Then, we’ll explore our data in three different layouts: the <strong>faceted bar chart</strong>, the <strong>lollipop chart</strong>, and the beautiful (<a href="https://www.data-to-viz.com/caveat/spider.html">if controversial</a>) <strong>radar chart</strong>.</p>
<p>As we’ll see, each of these three layouts makes it possible to compare multiple questions posed with the same list of “select all that apply” response options. In our case, we’ll look at two questions that are each related to <a href="https://pma.ipums.org/pma-action/variables/group/fem_cvinfo">sources of information about COVID-19</a>. Because both questions feature the same list of 13 possible information sources, we’ll be working with <strong>26 variables in total</strong>:</p>
<pre><code>202. How did you learn about Coronavirus (COVID-19)? Select all that apply:

[] Newspaper
[] Radio
[] Television
[] Poster / billboard
[] Town crier
[] Phone message
[] Family
[] Friends / neighbors
[] Community/religious leaders
[] Social media (Twitter, Facebook, WhatsApp)
[] Health personnel
[] Messages from government or authorities
[] School
[] None of the above
[] No response</code></pre>
<pre><code>204. Which of these sources do you trust for accurate information about
Coronavirus (COVID-19)? Select all that apply:

[] Newspaper
[] Radio
[] Television
[] Poster / billboard
[] Town crier
[] Phone message
[] Family
[] Friends / neighbors
[] Community/religious leaders
[] Social media (Twitter, Facebook, WhatsApp)
[] Health personnel
[] Messages from government or authorities
[] School
[] None of the above
[] No response</code></pre>
<h1 id="setup">Setup</h1>
<p>Before we think about how to visualize the responses to both of these questions, we’ll need to change a few things about the way they’re coded in each of the 26 corresponding variables. Suppose we’ve <a href="../2020-12-10-get-ipums-pma-data">downloaded an extract</a> from the IPUMS PMA website (all four samples, Female Respondents only) and we’ve put it in the “data” folder in our working directory. We’ll load a few packages (which you’ll need to install if you haven’t done so before), and we’ll load the extract into R:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://www.ipums.org'>ipumsr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://gdfe.co/srvyr/'>srvyr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/yixuan/showtext'>showtext</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ddsjoberg/gtsummary'>gtsummary</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://minato.sip21c.org/msb/'>fmsb</a></span><span class='op'>)</span>

<span class='va'>covid</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/read_ipums_micro.html'>read_ipums_micro</a></span><span class='op'>(</span>
  ddi <span class='op'>=</span> <span class='st'>"data/pma_00032.xml"</span>,
  dat <span class='op'>=</span> <span class='st'>"data/pma_00032.dat.gz"</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>You’ll find that all of the variables derived from the response options for the first question (“How did you learn about Coronavirus (COVID-19)?”) share the same prefix <code>CVLEARN</code>, and all of the variables derived from the response options from the second question (“Which of these sources do you trust for accurate information about Coronavirus (COVID-19)?”) share the same prefix <code>CVTRUST</code>. For example, you’ll find the responses for “Newspaper” recorded in <code>CVLEARNNEWS</code> and <code>CVTRUSTNEWS</code>.</p>
<aside>
Harmonized data from IPUMS will feature <strong>patterned variable names</strong> wherever possible. This makes it easy to apply a function over several related variables.
</aside>
<p>Taking a look at a variable like <code>CVTRUSTNEWS</code>, you’ll notice that these variables contain several different top-codes associated with different reasons for non-response:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>covid</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>CVTRUSTNEWS</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5 x 2
                  CVTRUSTNEWS     n
                    &lt;int+lbl&gt; &lt;int&gt;
1  0 [No]                      7071
2  1 [Yes]                     4886
3  2 [None of the above]        208
4 98 [No response or missing]    10
5 99 [NIU (not in universe)]      9</code></pre>
</div>
<p>The top-codes <code>98</code> and <code>99</code> should be familiar to regular IPUMS data users: they represent women who selected the “No response” option, and women who were ineligible to respond (see the <a href="https://pma.ipums.org/pma-action/variables/CVLEARNNEWS#universe_section">Universe tab</a>). The code <code>2</code> represents women who trust “None of the above” sources, <em>including</em> “Newspaper”.</p>
<p>Importantly, the number of women who selected codes 2, 98, and 99 will be <em>the same</em> for all variables derived from the same “select all that apply” question. While there are some analytic contexts where you might want to identify women who selected “None of the above”, this information could be collapsed with “No” responses in our plots. The simplest way to visualize data from these variables is to first transform them into <strong>simple binary indicators</strong> taking the <strong>logical</strong> values <code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>.</p>
<h2 id="logical-variables">Logical variables</h2>
<p>In previous posts, we’ve suggested <a href="../2021-07-01-covid-tables/index.html#display-value-labels">changing labelled variables into factors</a> for most data visualization and analysis applications. That’s because IPUMS value labels won’t appear in graphics or model summary output by default; you’ll instead see the numeric codes associated with each response (0, 1, 2, 98, 99, etc).</p>
<p>Binary variables are different: it’s not always necessary to plot <em>both</em> the “Yes” and “No” responses, and this is particularly true where the non-response frequency is low. Look at this <a href="file:///Users/Matt/R/pma-data-hub/docs/posts/2021-07-15-covid-likert/index.html#basic-bar-charts">stacked bar chart</a> that includes <em>all</em> of the available response categories, including non-response options:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-4-1.png" width="768" /></p>
</div>
<p>The non-response options barely appear on the plot at all: they comprise less than 1% of the respondents for each sample, so their presence in the legend adds unnecessary clutter. Meanwhile, the options “No” and “None of the above” <em>could</em> be collapsed into a single response; however, because we’ll be plotting 26 variables like this one, we’ll find that <strong>plotting only the “Yes” responses</strong> will provide much needed visual space to the final chart. In other words, we’ll rely on the reader to infer “No” responses through the use of <strong>negative space</strong>.</p>
<p>Because we plan to plot only the proportion of “Yes” responses in each variable, <strong>we won’t need value labels displayed in a legend</strong>. This makes it unnecessary to convert our variables into <strong>factors</strong>. Instead, we’ll convert our variables into <strong>logical</strong> objects that take the values <code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>. As we’ll see, this makes it easy to pre-filter only the cases where our variables of interest were coded <code>1</code> for “Yes”.</p>
<p>Another reason you should avoid creating binary <strong>factors</strong> is that <strong>factors are not meaningful in certain mathematical contexts</strong>. For example, we might want to exploit the mean of a binary variable as a handy way to generate the proportion of women who responded “Yes”. This won’t work if you create a factor:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_factor</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>my_factor</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] NA</code></pre>
</div>
<p><strong>Logical objects behave like integers in mathematical evaluation:</strong> every <code>TRUE</code> value is automatically treated as the value <code>1</code>, and every <code>FALSE</code> value is automatically treated as the value <code>0</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>my_logical</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span>, <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>my_logical</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0.6666667</code></pre>
</div>
<p>Converting <strong>labelled integer</strong> variables into <strong>logical</strong> variables is simple, but you must first <strong>remove value labels</strong> with the function <code>zap_labels()</code>. Here, we’ll also want to collapse code <code>2</code> together with code <code>0</code>, and we’ll adopt the value <code>NA</code> for non-response codes <code>98</code> and <code>99</code>. If we were working with <em>just one</em> variable (like <code>CVTRUSTNEWS</code>), we could combine all of these steps together in a single <code>mutate()</code> function like this:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>recoded</span> <span class='op'>&lt;-</span> <span class='va'>covid</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>
    CVTRUSTNEWS <span class='op'>=</span> <span class='va'>CVTRUSTNEWS</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_collapse.html'>lbl_collapse</a></span><span class='op'>(</span><span class='op'>~</span><span class='fu'>if_else</span><span class='op'>(</span><span class='va'>.val</span> <span class='op'>==</span> <span class='fl'>2</span>, <span class='fl'>0L</span>, <span class='va'>.val</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_na_if.html'>lbl_na_if</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>.val</span> <span class='op'>%in%</span> <span class='fl'>98</span><span class='op'>:</span><span class='fl'>99</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://haven.tidyverse.org/reference/zap_labels.html'>zap_labels</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<aside>
<div class="layout-chunk" data-layout="l-body">
<a href="http://tech.popdata.org/ipumsr/">
<img src="../../images/hex/ipumsr.png"/>
</a>
</div>
© 2017 (<a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL 2.0</a>)
</aside>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>recoded</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>CVTRUSTNEWS</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 2
  CVTRUSTNEWS     n
  &lt;lgl&gt;       &lt;int&gt;
1 FALSE        7279
2 TRUE         4886
3 NA             19</code></pre>
</div>
<p>However, we’ll want to apply the same changes to <em>all</em> of the 26 variables we’ve discussed. It would be tedious to manually recode 26 variables in series, and it would also be difficult to make changes if we needed to do so later. Instead, we’ll change all of our variables in one step using the <code>across()</code> function from <code>dplyr</code>.</p>
<h2 id="using-dplyracross">Using dplyr::across</h2>
<p>You can use <code>across()</code> inside <code>mutate()</code> to edit variables “in place”, which means that it is unnecessary to assign every recoded variable to its old name with a line like <code>CVTRUSTNEWS = CVTRUSTNEWS</code>. The first argument in <code>across()</code> specifies the variable(s) to be modified, and the second argument specifies how you’ll modify them (an optional third argument <code>.names</code> can be used to create new variable names, preserving the original variables under their old names if desired). For example, this code is equivalent to the code shown above:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>recoded</span> <span class='op'>&lt;-</span> <span class='va'>covid</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span>
    <span class='va'>CVLEARNNEWS</span>,
    <span class='op'>~</span><span class='va'>.x</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_collapse.html'>lbl_collapse</a></span><span class='op'>(</span><span class='op'>~</span><span class='fu'>if_else</span><span class='op'>(</span><span class='va'>.val</span> <span class='op'>==</span> <span class='fl'>2</span>, <span class='fl'>0L</span>, <span class='va'>.val</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_na_if.html'>lbl_na_if</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>.val</span> <span class='op'>%in%</span> <span class='fl'>98</span><span class='op'>:</span><span class='fl'>99</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://haven.tidyverse.org/reference/zap_labels.html'>zap_labels</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<aside>
<p>You can use <a href="https://jennybc.github.io/purrr-tutorial/ls03_map-function-syntax.html#map()_function_specification">anonymous functions</a> throughout the <code>tidyverse</code> using the symbol <code>~</code> and the pronoun <code>.x</code>.</p>
Here <code>.x</code> represents each of the variables selected for manipulation with <code>across()</code>.
</aside>
<p>Of course, the entire purpose of <code>across()</code> is to apply a function to <em>multiple</em> variables. You can use <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html">tidy selection</a> to identify variables, which means you provide variable names in a vector without quotation marks (e.g. <code>c(CVTRUSTNEWS, CVTRUSTTV, CVTRUSTRADIO)</code>), or you can use the following <strong>selection helpers</strong>:</p>
<ul>
<li><code>everything()</code> Matches all variables</li>
<li><code>last_col()</code> Select the last variable, possibly with an offset</li>
<li><code>starts_with()</code> Starts with a prefix</li>
<li><code>ends_with()</code> Ends with a suffix</li>
<li><code>contains()</code> Contains a literal string</li>
<li><code>matches()</code> Matches a regular expression</li>
<li><code>num_range()</code> Matches a numerical range like x01, x02, x03</li>
</ul>
<aside>
<div class="layout-chunk" data-layout="l-body">
<a href="https://dplyr.tidyverse.org/">
<img src="../../images/hex/dplyr.png"/>
</a>
</div>
© 2018 RStudio (<a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>)
</aside>
<p>We’ll use the “or” operator <code>|</code> to manipulate any variable that <code>starts_with("CVTRUST")</code> <em>or</em> <code>starts_with("CVLEARN")</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>covid</span> <span class='op'>&lt;-</span> <span class='va'>covid</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with</a></span><span class='op'>(</span><span class='st'>"CVTRUST"</span><span class='op'>)</span> <span class='op'>|</span> <span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with</a></span><span class='op'>(</span><span class='st'>"CVLEARN"</span><span class='op'>)</span>,
    <span class='op'>~</span><span class='va'>.x</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_collapse.html'>lbl_collapse</a></span><span class='op'>(</span><span class='op'>~</span><span class='fu'>if_else</span><span class='op'>(</span><span class='va'>.val</span> <span class='op'>==</span> <span class='fl'>2</span>, <span class='fl'>0L</span>, <span class='va'>.val</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_na_if.html'>lbl_na_if</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>.val</span> <span class='op'>%in%</span> <span class='fl'>98</span><span class='op'>:</span><span class='fl'>99</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://haven.tidyverse.org/reference/zap_labels.html'>zap_labels</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
      <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="pre-processing">Pre-processing</h1>
<p>Now that we’ve recoded all 26 variables as <strong>logical</strong> objects, we’ll take two additional pre-processing steps to prepare our data for visualization:</p>
<ol type="1">
<li>As discussed in <a href="../2021-07-15-covid-likert/index.html#stat">our last post</a>, we’ll pre-calculate the summary statistics we’d like to display in our plots. We’ll store this information in a table called <code>summary</code>.</li>
<li>We’ll build a <strong>custom theme</strong> for <code>ggplot2</code> that uses colors, fonts, and layout conventions matching the overall design of this blog. We’ll call this <code>theme_pma()</code>, and we’ll pipe it into the code used to create our charts below.</li>
</ol>
<h2 id="summary-table">Summary Table</h2>
<p>With a little practice, most of us can visualize the final <strong>chart</strong> we want to create. Visualizing the intermediate <strong>data format</strong> we’ll need to build that chart can be much harder!</p>
<p>Particularly for beginners, we think it’s important to start with a list of all the dimensions you think you might want to display in your plot. Then, <strong>plan to construct a summary table that includes one column for each dimension.</strong> Any column containing text should be formatted <em>exactly</em> as you want it to be shown in your final plot. For example,</p>
<ul>
<li>Our data come from two “select all that apply” questions with an identicial list of response options. Let’s list each response option in a column called <code>SOURCE</code> (as in “source of information”), and we’ll identify the original question with “CVTRUST” or “CVLEARN” in a second column called <code>QUESTION</code>.</li>
<li>We’ll include the third column called <code>COUNTRY</code> so that we can break down responses by country (we’ll also note the sub-national region for samples that are not nationally representative).</li>
<li>For each <code>QUESTION</code>, we’ll calculate a weighted population-level estimate for the proportion of women who trust / learned about COVID-19 from each <code>SOURCE</code> in each <code>COUNTRY</code>. We’ll store point-estimates in a column called <code>EST</code>, and we’ll store the upper and lower limits of a 95% confidence interval in <code>UPP</code> and <code>LOW</code>, respectively.</li>
<li>Lastly, we should create readable labels for each <code>QUESTION</code> in a column that we’ll call <code>QTEXT</code>.</li>
</ul>
<p>We’ll use <code>map_df()</code> from the <code>purrr</code> package to build this table by iterating through all of the variables containing the prefixes “CVTRUST” and “CVLEARN”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>&lt;-</span> <span class='fu'>map_df</span><span class='op'>(</span>
  <span class='co'># The first argument of `map_df()` is a vector we'd like the iterate</span>
  <span class='co'># through. </span>
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"CVTRUST"</span>, <span class='st'>"CVLEARN"</span><span class='op'>)</span>,
  
  <span class='co'># The second argument of `map_df()` is a function applied in each </span>
  <span class='co'># iteration. When you see `.x` below, it refers to the strings "CVTRUST" or</span>
  <span class='co'># "CVLEARN".</span>
  <span class='op'>~</span><span class='va'>covid</span> <span class='op'>%&gt;%</span> 
    
    <span class='co'># Convert COUNTRY to a factor with edited labels</span>
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>
      COUNTRY <span class='op'>=</span> <span class='va'>COUNTRY</span> <span class='op'>%&gt;%</span> 
        <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
        <span class='fu'>fct_recode</span><span class='op'>(</span>
          `DRC (Kinshasa)` <span class='op'>=</span> <span class='st'>"Congo, Democratic Republic"</span>,
          `Nigeria (Lagos &amp; Kano)` <span class='op'>=</span> <span class='st'>"Nigeria"</span>
        <span class='op'>)</span> <span class='op'>%&gt;%</span> 
        <span class='fu'>fct_drop</span><span class='op'>(</span><span class='op'>)</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span> 
    
    <span class='co'># Specify survey design information with `CVQWEIGHT` and `EAID`</span>
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/as_survey_design.html'>as_survey_design</a></span><span class='op'>(</span>weight <span class='op'>=</span> <span class='va'>CVQWEIGHT</span>, id <span class='op'>=</span> <span class='va'>EAID</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    
    <span class='co'># Estimate the proportion of TRUE responses for every source (by COUNTRY)</span>
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>COUNTRY</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/summarise.html'>summarise</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/across.html'>across</a></span><span class='op'>(</span>
      <span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>starts_with</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>)</span>,
      <span class='kw'>function</span><span class='op'>(</span><span class='va'>var</span><span class='op'>)</span><span class='op'>{</span><span class='fl'>100</span> <span class='op'>*</span> <span class='fu'><a href='http://gdfe.co/srvyr/reference/survey_mean.html'>survey_mean</a></span><span class='op'>(</span><span class='va'>var</span>, vartype <span class='op'>=</span> <span class='st'>"ci"</span>, na.rm <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>}</span>
    <span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    
    <span class='co'># Add the suffix "_EST" to each point estimate</span>
    <span class='co'># Ensure that all variable names use upper-case</span>
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>rename_with</a></span><span class='op'>(</span><span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>.x</span>, <span class='st'>"_EST"</span><span class='op'>)</span>, <span class='op'>!</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/starts_with.html'>contains</a></span><span class='op'>(</span><span class='st'>"_"</span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='op'>!</span><span class='va'>COUNTRY</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>rename_with</a></span><span class='op'>(</span><span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>toupper</a></span><span class='op'>(</span><span class='va'>.x</span><span class='op'>)</span>, <span class='fu'><a href='https://tidyselect.r-lib.org/reference/everything.html'>everything</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    
    <span class='co'># Up to this point, each source has three columns: the point estimate,</span>
    <span class='co'># and the upper and lower-limits of the 95% confidence interval. We will </span>
    <span class='co'># use `pivot_longer` to store each source in a separate row. Each source</span>
    <span class='co'># label will appear in a new column called `SOURCE`.</span>
    <span class='fu'>pivot_longer</span><span class='op'>(</span>
      <span class='op'>!</span><span class='va'>COUNTRY</span>,
      names_pattern <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>.x</span>, <span class='st'>"(.*)_(.*)"</span><span class='op'>)</span>,
      names_to <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"SOURCE"</span>, <span class='st'>".value"</span><span class='op'>)</span>,
      values_to <span class='op'>=</span> <span class='st'>"PCT"</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span>
    
    <span class='co'># Relabel `SOURCE` with the labels we want to appear on our plots.</span>
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>
      SOURCE <span class='op'>=</span> <span class='va'>SOURCE</span> <span class='op'>%&gt;%</span>
        <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
        <span class='fu'>fct_recode</span><span class='op'>(</span>
          `Family` <span class='op'>=</span> <span class='st'>"FAM"</span>,
          `Radio` <span class='op'>=</span> <span class='st'>"RADIO"</span>,
          `TV` <span class='op'>=</span> <span class='st'>"TV"</span>,
          `Poster / Billboard` <span class='op'>=</span> <span class='st'>"POSTER"</span>,
          `Town Crier` <span class='op'>=</span> <span class='st'>"CRIER"</span>,
          `Phone Message` <span class='op'>=</span> <span class='st'>"PHONE"</span>,
          `Community Leaders` <span class='op'>=</span> <span class='st'>"LEADER"</span>,
          `Health Workers` <span class='op'>=</span> <span class='st'>"HW"</span>,
          `Social Media` <span class='op'>=</span> <span class='st'>"SOCMEDIA"</span>,
          `Friends / Neighbors` <span class='op'>=</span> <span class='st'>"FRIEND"</span>,
          `Government` <span class='op'>=</span> <span class='st'>"GOV"</span>,
          `School` <span class='op'>=</span> <span class='st'>"SCHOOL"</span>,
          `Newpaper` <span class='op'>=</span> <span class='st'>"NEWS"</span>
        <span class='op'>)</span>
    <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  
  <span class='co'># Finally, create `QUESTION` to hold the string represented by `.x`, and </span>
  <span class='co'># QTEXT to hold the text labels that we'll use to identify the </span>
  <span class='co'># original survey question on our plot</span>
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>QUESTION <span class='op'>=</span> <span class='va'>.x</span>, .before <span class='op'>=</span> <span class='va'>SOURCE</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>QTEXT <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
    <span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVTRUST"</span> <span class='op'>~</span> <span class='st'>"Which do you trust for COVID-19 information?"</span>,
    <span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVLEARN"</span> <span class='op'>~</span> <span class='st'>"How did you learn about COVID-19?"</span>
  <span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span> 
</code></pre>
</div>
</div>
<aside>
<div class="layout-chunk" data-layout="l-body">
<a href="https://purrr.tidyverse.org/">
<img src="../../images/hex/purrr.png"/>
</a>
</div>
© RStudio (<a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>)
</aside>
<p>The resulting table has one row for each unique combination of <code>COUNTRY</code>, <code>QUESTION</code>, and <code>SOURCE</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span>
</code></pre>
</div>
<pre><code># A tibble: 104 x 7
   COUNTRY    QUESTION SOURCE       EST   LOW   UPP QTEXT             
   &lt;fct&gt;      &lt;chr&gt;    &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;             
 1 Burkina F… CVTRUST  Family      73.3  68.0  78.7 Which do you trus…
 2 Burkina F… CVTRUST  Friends /…  67.6  62.2  73.0 Which do you trus…
 3 Burkina F… CVTRUST  Government  76.8  69.4  84.2 Which do you trus…
 4 Burkina F… CVTRUST  Health Wo…  89.0  85.5  92.5 Which do you trus…
 5 Burkina F… CVTRUST  Community…  74.3  69.4  79.2 Which do you trus…
 6 Burkina F… CVTRUST  Newpaper    45.6  39.0  52.3 Which do you trus…
 7 Burkina F… CVTRUST  Phone Mes…  50.0  44.6  55.5 Which do you trus…
 8 Burkina F… CVTRUST  Poster / …  54.6  48.6  60.5 Which do you trus…
 9 Burkina F… CVTRUST  Radio       90.7  88.1  93.3 Which do you trus…
10 Burkina F… CVTRUST  School      67.2  60.0  74.4 Which do you trus…
11 Burkina F… CVTRUST  Social Me…  38.3  33.0  43.5 Which do you trus…
12 Burkina F… CVTRUST  Town Crier  58.5  53.2  63.8 Which do you trus…
13 Burkina F… CVTRUST  TV          72.7  67.2  78.3 Which do you trus…
14 DRC (Kins… CVTRUST  Family      31.3  23.2  39.5 Which do you trus…
15 DRC (Kins… CVTRUST  Friends /…  27.7  20.7  34.8 Which do you trus…
# … with 89 more rows</code></pre>
</div>
<h2 id="plot-theme">Plot theme</h2>
<p>A custom <code>theme</code> usually modifies one of the <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">pre-made themes</a> available in <code>ggplot2</code>. Here, we make some small changes to <code>theme_minimal()</code>, and we’ll list the modified theme together with a few additional <code>ggplot2</code> functions that we’ll want to use in each plot. Our theme will also contain a custom <strong>font</strong> that we’ve downloaded and saved in the “fonts” subfolder of our <a href="https://github.com/ipums/pma-data-hub">project root</a> directory.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>font_add</span><span class='op'>(</span>
  family <span class='op'>=</span> <span class='st'>"cabrito"</span>, 
  regular <span class='op'>=</span> <span class='st'>"../../fonts/cabritosansnormregular-webfont.ttf"</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/showtext/man/showtext_auto.html'>showtext_auto</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>theme_pma</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>title</span>, <span class='va'>subtitle</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>components</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    <span class='co'># We'll use `theme_minimal()` as a baseline</span>
    <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%+replace%</span> 
      <span class='fu'>theme</span><span class='op'>(</span>
        
        <span class='co'># Text elements</span>
        text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>                    <span class='co'># text default</span>
          family <span class='op'>=</span> <span class='st'>"cabrito"</span>, 
          size <span class='op'>=</span> <span class='fl'>10</span>
        <span class='op'>)</span>, 
        plot.title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>              <span class='co'># title override</span>
          size <span class='op'>=</span> <span class='fl'>18</span>, 
          color <span class='op'>=</span> <span class='st'>"#00263A"</span>,
          margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
        <span class='op'>)</span>, 
        plot.subtitle <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>           <span class='co'># subtitle override</span>
          size <span class='op'>=</span> <span class='fl'>12</span>,
          margin <span class='op'>=</span> <span class='fu'>margin</span><span class='op'>(</span>b <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
        <span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,         <span class='co'># legend title override</span>
        
        <span class='co'># Grid elements</span>
        panel.grid.minor <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,     <span class='co'># strip minor gridlines</span>
        axis.ticks <span class='op'>=</span> <span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,           <span class='co'># strip axis ticks</span>
        
        <span class='co'># Legend elements</span>
        legend.position <span class='op'>=</span> <span class='st'>"bottom"</span>,
      <span class='op'>)</span>,
    
    <span class='co'># We'll define custom colors for each COUNTRY  </span>
    <span class='fu'>scale_fill_manual</span><span class='op'>(</span>
      values <span class='op'>=</span> <span class='fu'>alpha</span><span class='op'>(</span>
        alpha <span class='op'>=</span> <span class='fl'>.85</span>,   <span class='co'># .85 creates bars that are 15% transparent</span>
        colour <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
          <span class='st'>"#81A88D"</span>,   <span class='co'># Green</span>
          <span class='st'>"#CCBA72"</span>,   <span class='co'># Tan</span>
          <span class='st'>"#98579B"</span>,   <span class='co'># PMA Pink</span>
          <span class='st'>"#00263A"</span>    <span class='co'># IPUMS Navy</span>
        <span class='op'>)</span>
      <span class='op'>)</span>
    <span class='op'>)</span>,
    
    <span class='co'># A similar color scheme will by used to color binary geom_points</span>
    <span class='fu'>scale_color_manual</span><span class='op'>(</span>
      values <span class='op'>=</span> <span class='fu'>alpha</span><span class='op'>(</span>
        alpha <span class='op'>=</span> <span class='fl'>.85</span>,   <span class='co'># .85 creates bars that are 15% transparent</span>
        colour <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
          <span class='st'>"#98579B"</span>,   <span class='co'># PMA Pink</span>
          <span class='st'>"#00263A"</span>    <span class='co'># IPUMS Navy</span>
        <span class='op'>)</span>
      <span class='op'>)</span>
    <span class='op'>)</span>,
    
    <span class='co'># Title and labels</span>
    <span class='fu'>labs</span><span class='op'>(</span>
      title <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>toupper</a></span><span class='op'>(</span><span class='va'>title</span><span class='op'>)</span>,
      subtitle <span class='op'>=</span> <span class='st'>"Estimated percentage for populations of women age 15-49 in summer 2020"</span>,
      x <span class='op'>=</span> <span class='cn'>NULL</span>,
      y <span class='op'>=</span> <span class='cn'>NULL</span>,
      fill <span class='op'>=</span> <span class='cn'>NULL</span>
    <span class='op'>)</span>,
    
    <span class='co'># Flip coordinates and sort legend items</span>
    <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span>,
    <span class='fu'>guides</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='fu'>guide_legend</span><span class='op'>(</span>reverse <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
    
  <span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<aside>
<div class="layout-chunk" data-layout="l-body">
<a href="https://ggplot2.tidyverse.org/">
<img src="../../images/hex/ggplot2.png"/>
</a>
</div>
© RStudio (<a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0</a>)
</aside>
<h1 id="bar-charts">Bar Charts</h1>
<p>We’re now ready to apply what we learned about bar charts in our <a href="../2021-07-15-covid-likert/index.html">last post</a> to the binary variables we’ve summarized in <code>summary</code>. At first, you might consider plotting the variables from each <code>QUESTION</code> separately; to do this, you’d first need to use <code>filter(QUESTION == "CVLEARN")</code>. You should also consider how you’d like to order the 13 different sources of information in <code>SOURCE</code>: here, we use <code>fct_reorder(SOURCE, EST, mean)</code> to sort the levels of <code>SOURCE</code> according to the mean value of <code>EST</code> across the four samples.</p>
<p>First, consider the responses to “How did you learn about COVID-19?”</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>filter</a></span><span class='op'>(</span><span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVLEARN"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>SOURCE <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>SOURCE</span>, <span class='va'>EST</span>, <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>COUNTRY</span>, y <span class='op'>=</span> <span class='va'>EST</span>, x <span class='op'>=</span> <span class='va'>SOURCE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>.6</span>, position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>, stat <span class='op'>=</span> <span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_errorbar</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LOW</span>, ymax <span class='op'>=</span> <span class='va'>UPP</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.2</span>,
    position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>,
    alpha <span class='op'>=</span> <span class='fl'>0.5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_pma</span><span class='op'>(</span><span class='st'>"How did you learn about COVID-19?"</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-19-1.png" width="768" /></p>
</div>
<p>When the PMA COVID-19 survey was fielded (summer 2020), we estimate that radio, television, friends / neighbors, and family were the most effective sources reaching women with information about COVID-19 across the four sampled countries. However, this plot also shows stark differences between countries: we can easily see that radio was comparatively less effective at reaching women in Kinshasa, whereas television was comparatively more effective. Meanwhile, television reached a much smaller share of the women in Burkina Faso compared to women in the other countries.</p>
<p>At the lower end of the spectrum, very few women in any country learned about COVID-19 from posters / billboards, town criers, or their school. Newspapers reached almost no women in Kinshasa or Burkina Faso, but they appeared to be more effective in Lagos / Kano and in Kenya. Perhaps most surprisingly, social media reached a only a modest number of women, although its role varies considerably between countries.</p>
<p>Let’s now look at the responses to “Which of these sources do you trust for accurate information about COVID-19?”</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>filter</a></span><span class='op'>(</span><span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVTRUST"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>SOURCE <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>SOURCE</span>, <span class='va'>EST</span>, <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>COUNTRY</span>, y <span class='op'>=</span> <span class='va'>EST</span>, x <span class='op'>=</span> <span class='va'>SOURCE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>.6</span>, position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>, stat <span class='op'>=</span> <span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_errorbar</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LOW</span>, ymax <span class='op'>=</span> <span class='va'>UPP</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.2</span>,
    position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>,
    alpha <span class='op'>=</span> <span class='fl'>0.5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_pma</span><span class='op'>(</span>
    <span class='st'>"Which do you trust for COVID-19 information?"</span>, 
    <span class='st'>"Estimated percentage of women aged 15-49 (summer 2020)"</span>
  <span class='op'>)</span> 
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-20-1.png" width="768" /></p>
</div>
<p>A clear strength of this layout is that we easily see the large differences in trust for each source between countries: women in Burkina Faso appear to hold much higher levels of trust in sources of information, overall. Taking into account the error bars produced by our 95% confidence interval, it’s also easy to observe certain similarities between women in Kenya and Kinshasa.</p>
<p>We’ve again sorted information sources using the mean value of <code>EST</code> across countries, making it easy to rank each source from “most trusted” to “least trusted” across countries. Radio and television were generally the most trusted sources of information, followed by health workers and government officials. The same sources that reached the smallest proportion of women in our last chart - posters / billboards, town criers, and schools - are also the least trusted sources here.</p>
<p>One important limitation of this layout is that - except for the top and bottom sources on each list - it’s difficult to keep track of the rank order of sources between charts. It’s also hard to tell whether <em>trusted</em> sources are also <em>effective</em> messengers of COVID-19 information, as the two charts are not yet aligned side-by-side. We’ll solve this problem by <strong>faceting</strong> the two charts together in a single display.</p>
<p>Here, we’ll omit the <code>filter()</code> function and instead use <code>facet_wrap(vars(QTEXT))</code> to build one plot for each <code>QTEXT</code> (the custom text labels we wrote for each question above).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>SOURCE <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>SOURCE</span>, <span class='va'>EST</span>, <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>COUNTRY</span>, y <span class='op'>=</span> <span class='va'>EST</span>, x <span class='op'>=</span> <span class='va'>SOURCE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_bar</span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>.6</span>, position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>, stat <span class='op'>=</span> <span class='st'>"identity"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_errorbar</span><span class='op'>(</span>
    <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LOW</span>, ymax <span class='op'>=</span> <span class='va'>UPP</span><span class='op'>)</span>,
    width <span class='op'>=</span> <span class='fl'>0.2</span>,
    position <span class='op'>=</span> <span class='fu'>position_dodge</span><span class='op'>(</span><span class='fl'>0.6</span><span class='op'>)</span>,
    alpha <span class='op'>=</span> <span class='fl'>0.5</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_pma</span><span class='op'>(</span>
    <span class='st'>"Are trusted sources reaching
    women with COVID-19 information?"</span>
  <span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='fu'><a href='http://gdfe.co/srvyr/reference/summarise_all.html'>vars</a></span><span class='op'>(</span><span class='va'>QTEXT</span><span class='op'>)</span><span class='op'>)</span> 
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-21-1.png" width="768" /></p>
</div>
<p>This time, we’ve ranked the <em>most trusted and effective</em> sources according to the highest common mean value for both “CVLEARN” and “CVTRUST” across countries. Radio and TV both reach and are trusted by comparable proportions of women across countries. Beyond those two sources, we see get an overall sense that - as of summer 2020 - <strong>most sources fell short of reaching the share of women in each country who would trust them for accurate information about COVID-19</strong>.</p>
<p>We like a lot of things about this faceted bar chart: while it’s easy to compare sources within and across countries, we’re also able to directly compare responses to both survey questions at the same time. And, unlike the other charts we’ll explore below, it allows us to include <strong>error bars</strong> representing the 95% confidence interval for each population-level estimate.</p>
<p>On the other hand, this plot is not particularly concise: it uses a good deal of space, and it forces the reader to scan <em>two</em> grids when comparing the effectiveness and trust of any particular source.</p>
<h1 id="lollipop-chart">Lollipop Chart</h1>
<p>If the main point you’d like to emphasize with these data is the <em>disparity between effectiveness and trust</em> for each source, you might consider plotting both survey questions on the same grid using a <strong>lollipop chart</strong>. The <strong>lollipop chart</strong> is also useful in certain contexts where space is limited, as it minimizes the surface area of each <code>geom</code>.</p>
<p>Let’s take a look at a <strong>lollipop chart</strong> where the estimated proportion of women who <em>learned from</em> each source is connected on a line with the proportion of women who <em>trust</em> each source. In the previous plot, we saw that levels of trust are generally <em>higher</em> than levels of effectiveness for each source, but we couldn’t easily identify exceptions to this trend; here we’ll draw a <strong>dashed line</strong> any time the proportion of women who <em>trust</em> a source is <strong>lower than</strong> the proportion of women who <em>learned</em> from the source. We’ll do this by adding a new column to <code>summary</code> that takes the value “dashed” in those cases, and “solid” otherwise.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>&lt;-</span> <span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>COUNTRY</span>, <span class='va'>SOURCE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>DEFICIT <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVTRUST"</span> <span class='op'>&amp;</span> <span class='va'>EST</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>EST</span><span class='op'>)</span><span class='op'>)</span>, 
    <span class='st'>"solid"</span>, 
    <span class='st'>"dashed"</span>
  <span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/groups.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<p>We’ll create one “lollipop” for each source by linking two <code>geom_point()</code> markers for each source with a <code>geom_line()</code>, and we’ll use <code>facet_wrap()</code>to build one panel for each <code>COUNTRY</code>. To make this plot easier to interpret, we’ll use a pink circle to represent the our point estimate <code>EST</code> for “CVLEARN”, and a blue triangle to represent the our point estimate <code>EST</code> for “CVTRUST”. Then, wherever “CVTRUST” lags behind “CVLEARN”, we’ll use the column <code>DEFICIT</code> we added to <code>summary</code> to instruct <code>geom_line</code> to draw a “dashed” line instead of a “solid” one.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>SOURCE <span class='op'>=</span> <span class='fu'>fct_reorder</span><span class='op'>(</span><span class='va'>SOURCE</span>, <span class='va'>EST</span>, <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>SOURCE</span>, y <span class='op'>=</span> <span class='va'>EST</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>shape <span class='op'>=</span> <span class='va'>QTEXT</span>, color <span class='op'>=</span> <span class='va'>QTEXT</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>linetype <span class='op'>=</span> <span class='va'>DEFICIT</span><span class='op'>)</span>, alpha <span class='op'>=</span> <span class='fl'>.5</span>, show.legend <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='fu'><a href='http://gdfe.co/srvyr/reference/summarise_all.html'>vars</a></span><span class='op'>(</span><span class='va'>COUNTRY</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_pma</span><span class='op'>(</span>
    <span class='st'>"Are trusted sources reaching
    women with COVID-19 information?"</span>
  <span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>"top"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-23-1.png" width="768" /></p>
</div>
<p>Compared to the <strong>faceted bar chart</strong>, this <strong>lollipop chart</strong> allows us to easily see the <strong>size of the gap</strong> between the proportion of women who <em>trust</em> each source and the number of women who had <em>learned</em> about COVID-19 from the source in summer 2020. We can also easily identify the sources in each country that are trusted by <em>fewer</em> women than had they had reached: as you might expect, these are typically “social” sources of information like friends / neighbors, family members, and social media.</p>
<p>This chart works pretty well for our data, where we only need to compare responses from <em>two</em> “select all that apply” questions. You might be wondering, though, what to do with <em>three or more</em>: in that case, the <strong>lollipop chart</strong> might not be your best option. Instead, you might consider overlaying several survey questions with semi-transparent layers in a <strong>radar chart</strong>.</p>
<h1 id="radar-chart">Radar Chart</h1>
<p>In a <strong>radar chart</strong> configuration, each <code>SOURCE</code> will be plotted on a polar coordinate grid - much like the numbers on a clock. The value in <code>EST</code> will map the radial distance of each <code>SOURCE</code> from the center. Otherwise, we’ll use the same layout we adopted for the <strong>lollipop chart</strong> above: we’ll create one facet for each <code>COUNTRY</code> and we’ll plot both survey questions from <code>QUESTION</code> on the same grid.</p>
<p>Unfortunately, radar charts are not natively supported in <code>ggplot2</code>, so we’ll need to rely on another package called <a href="https://cran.r-project.org/web/packages/fmsb/index.html">fmsb</a> that uses base R graphics and syntax conventions. We won’t get into the details here, but if you’d like to see more examples using the <code>fmsb</code> package, we recommend checking out the excellent <a href="https://www.r-graph-gallery.com/142-basic-radar-chart.html">R Graph Gallery</a>.</p>
<aside>
If you’re interested in a <code>ggplot2</code> approach to <strong>radar charts</strong>, check out the excellent <a href="https://github.com/ricardo-bion/ggradar/">ggradar</a> package.
</aside>
<p>In short, we’ll need to transform <code>summary</code> once more by pivoting the <code>EST</code> value for each <code>SOURCE</code> into separate columns. Moreover, we’ll define a <code>border_color</code> and a <code>fill_color</code> for each of our survey questions; we’ll use blue for variables derived from “CVTRUST”, and we’ll use pink for those derived from “CVLEARN”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>summary</span> <span class='op'>&lt;-</span> <span class='va'>summary</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>SOURCE <span class='op'>=</span> <span class='fu'>str_replace</span><span class='op'>(</span><span class='va'>SOURCE</span>, <span class='st'>" (?=[:alpha:])"</span>, <span class='st'>"\n"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>pivot_wider</span><span class='op'>(</span>
    id_cols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>COUNTRY</span>, <span class='va'>QUESTION</span><span class='op'>)</span>,
    names_from <span class='op'>=</span> <span class='va'>SOURCE</span>,
    values_from <span class='op'>=</span> <span class='va'>EST</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>mutate</a></span><span class='op'>(</span>
    border_color <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span>
      <span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVTRUST"</span>,
      <span class='st'>"#00263A"</span>, <span class='co'># d blue</span>
      <span class='st'>"#98579B"</span>  <span class='co'># d pink</span>
    <span class='op'>)</span>,
    fill_color <span class='op'>=</span> <span class='fu'>if_else</span><span class='op'>(</span>
      <span class='va'>QUESTION</span> <span class='op'>==</span> <span class='st'>"CVTRUST"</span>,
      <span class='st'>"#7A99AC50"</span>, <span class='co'># l blue</span>
      <span class='st'>"#e8bce850"</span>  <span class='co'># l pink</span>
    <span class='op'>)</span>
  <span class='op'>)</span>

<span class='va'>summary</span>
</code></pre>
</div>
<pre><code># A tibble: 8 x 17
  COUNTRY QUESTION Family `Friends /\nNei… Government `Health\nWorker…
  &lt;fct&gt;   &lt;chr&gt;     &lt;dbl&gt;            &lt;dbl&gt;      &lt;dbl&gt;            &lt;dbl&gt;
1 Burkin… CVTRUST    73.3             67.6      76.8             89.0 
2 DRC (K… CVTRUST    31.3             27.7      37.7             47.4 
3 Kenya   CVTRUST    42.0             40.1      61.2             57.8 
4 Nigeri… CVTRUST    27.1             32.8      29.5             34.1 
5 Burkin… CVLEARN    22.7             31.9       2.07            13.0 
6 DRC (K… CVLEARN    16.6             40.5       5.38             8.24
7 Kenya   CVLEARN    28.7             45.3      20.7             17.6 
8 Nigeri… CVLEARN    32.6             53.0       8.66             8.68
# … with 11 more variables: Community Leaders &lt;dbl&gt;, Newpaper &lt;dbl&gt;,
#   Phone Message &lt;dbl&gt;, Poster / Billboard &lt;dbl&gt;, Radio &lt;dbl&gt;,
#   School &lt;dbl&gt;, Social Media &lt;dbl&gt;, Town Crier &lt;dbl&gt;, TV &lt;dbl&gt;,
#   border_color &lt;chr&gt;, fill_color &lt;chr&gt;</code></pre>
</div>
<aside>
We’ve also inserted a line break symbol <code>\n</code> wherever a <code>SOURCE</code> name contains a space followed by a letter. This will make the final plot a bit narrower and easier to read.
</aside>
<p>The easiest way to create a faceted plot with base R graphics is to create a custom <code>layout()</code> defined by a matrix containing an index number for each element you’ll place in a facet. We’ll create each of these elements in order:</p>
<ol type="1">
<li>A title (in the “outer margin area” <code>oma</code>), and subtitle (in the facet numbered <code>1</code>)</li>
<li>Four radar charts: one for each country (in facets numbered <code>2</code> through <code>5</code>)</li>
<li>A legend (in the facet numbered <code>6</code>)</li>
</ol>
<p>If you’d like, you can preview the layout with <code>layout.show()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/graphics/frame.html'>plot.new</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>
  family <span class='op'>=</span> <span class='st'>"cabrito"</span>,
  oma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>)</span>,
  mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>0</span>, <span class='fl'>2</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/layout.html'>layout</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>6</span><span class='op'>)</span>, 
    ncol <span class='op'>=</span> <span class='fl'>2</span>, 
    byrow <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>,
  heights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.5</span>, <span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/layout.html'>layout.show</a></span><span class='op'>(</span><span class='fl'>6</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-25-1.png" width="768" /></p>
</div>
<p>Now, we’ll iterate through each facet one at a time. In order to build the <strong>radar charts</strong>, we’ll need to use <code>radar_chart()</code> in a for-loop, in which we’ll remove all rows from <code>summary</code> except for those containing a particular <code>COUNTRY</code>. Because <code>radar_chart()</code> requires additional rows containing the <code>min</code> and <code>max</code> values for each grid, we’ll add them with <code>rbind(100, 0, .)</code> within each loop.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'># Layout </span>
<span class='fu'><a href='https://rdrr.io/r/graphics/frame.html'>plot.new</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>
  family <span class='op'>=</span> <span class='st'>"cabrito"</span>,
  oma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>)</span>,
  mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>0</span>, <span class='fl'>2</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/layout.html'>layout</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>6</span><span class='op'>)</span>,
    ncol <span class='op'>=</span> <span class='fl'>2</span>,
    byrow <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>,
  heights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.5</span>, <span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># Title </span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/frame.html'>plot.new</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/title.html'>title</a></span><span class='op'>(</span>
  main <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>toupper</a></span><span class='op'>(</span><span class='st'>"Are trusted sources reaching
    women with COVID-19 information?"</span><span class='op'>)</span>,
  outer <span class='op'>=</span> <span class='cn'>TRUE</span>, 
  cex.main <span class='op'>=</span> <span class='fl'>3.5</span>,
  col.main <span class='op'>=</span>  <span class='st'>"#00263A"</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/mtext.html'>mtext</a></span><span class='op'>(</span>
  <span class='st'>"Estimated percentage for populations of women age 15-49 in summer 2020"</span>,
  cex <span class='op'>=</span> <span class='fl'>1.25</span>
<span class='op'>)</span>

<span class='co'># Loop through each Country</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>2</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>summary</span><span class='op'>$</span><span class='va'>COUNTRY</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='va'>summary</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>filter</a></span><span class='op'>(</span><span class='va'>COUNTRY</span> <span class='op'>==</span> <span class='va'>i</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>0</span>, <span class='va'>.</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>column_to_rownames</span><span class='op'>(</span><span class='st'>"QUESTION"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>COUNTRY</span><span class='op'>)</span>
  
  <span class='va'>border_color</span> <span class='op'>&lt;-</span> <span class='va'>dat</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>slice</span><span class='op'>(</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>pull</a></span><span class='op'>(</span><span class='va'>border_color</span><span class='op'>)</span>
  
  <span class='va'>fill_color</span> <span class='op'>&lt;-</span> <span class='va'>dat</span> <span class='op'>%&gt;%</span> 
    <span class='fu'>slice</span><span class='op'>(</span><span class='fl'>3</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>pull</a></span><span class='op'>(</span><span class='va'>fill_color</span><span class='op'>)</span>
  
  <span class='fu'><a href='https://rdrr.io/pkg/fmsb/man/radarchart.html'>radarchart</a></span><span class='op'>(</span>
    <span class='va'>dat</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='http://gdfe.co/srvyr/reference/dplyr_single.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>border_color</span>, <span class='op'>-</span><span class='va'>fill_color</span><span class='op'>)</span>,
    axistype <span class='op'>=</span> <span class='fl'>1</span>,
    
    <span class='co'># polygon</span>
    pcol <span class='op'>=</span> <span class='va'>border_color</span>, pfcol <span class='op'>=</span> <span class='va'>fill_color</span>, plwd <span class='op'>=</span> <span class='fl'>4</span>, plty <span class='op'>=</span> <span class='fl'>1</span>,
    
    <span class='co'># grid</span>
    cglcol<span class='op'>=</span>  <span class='st'>"grey"</span>, cglty <span class='op'>=</span> <span class='fl'>1</span>, axislabcol <span class='op'>=</span> <span class='st'>"grey"</span>, 
    caxislabels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>100</span>,<span class='fl'>20</span><span class='op'>)</span>, cglwd <span class='op'>=</span> <span class='fl'>0.8</span>,
    
    <span class='co'># labels</span>
    vlcex <span class='op'>=</span> <span class='fl'>0.8</span>,
    
    <span class='co'># title </span>
    title <span class='op'>=</span> <span class='va'>i</span>, cex.main <span class='op'>=</span> <span class='fl'>2</span>
  <span class='op'>)</span>
<span class='op'>}</span>

<span class='co'># Legend </span>
<span class='fu'><a href='https://rdrr.io/r/graphics/frame.html'>plot.new</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/legend.html'>legend</a></span><span class='op'>(</span>
  <span class='st'>"top"</span>,
  legend <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Which do you trust for COVID-19 information?"</span>,
             <span class='st'>"How did you learn about COVID-19?"</span><span class='op'>)</span>,
  horiz <span class='op'>=</span> <span class='cn'>FALSE</span>,
  bty <span class='op'>=</span> <span class='st'>"n"</span>,
  pch <span class='op'>=</span> <span class='fl'>20</span> ,
  col <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>summary</span><span class='op'>$</span><span class='va'>border_color</span><span class='op'>)</span>,
  text.col <span class='op'>=</span>  <span class='st'>"#00263A"</span>,
  cex <span class='op'>=</span> <span class='fl'>2</span>,
  pt.cex <span class='op'>=</span> <span class='fl'>4</span>,
  y.intersp <span class='op'>=</span> <span class='fl'>1.5</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="covid-batches_files/figure-html5/unnamed-chunk-26-1.png" width="960" /></p>
</div>
<p>There are quite a few <a href="https://www.data-to-viz.com/caveat/spider.html">important caveats</a> to the <strong>radar chart</strong>, but we think these are a bit more intuitive than the <strong>lollipop chart</strong> shown above. The perimeter of the blue “trust” shape is clearly larger than the perimeter of the pink “learn” shape in all four countries, and it’s easy to identify cases where a particular source has reached a larger share of the population than the share that trusts it.</p>
<p>On the other hand, the circular layout of the <strong>radar chart</strong> makes it nearly impossible to visualize <em>which of the source is most trusted and effective</em>. If the overall rank order of the response options is an important take-away for your readers, you should almost certainly choose the <strong>lollipop chart</strong> or the <strong>faceted bar chart</strong> instead.</p>
<p>An additional consideration here: we’ve highlighted the <strong>radar chart</strong> because it allows you to <em>overlay</em> the responses to each “select all that apply” question, rather than plotting them side-by-side. You should still use caution, however, not to overcrowd your chart with too many layers.</p>
<h1 id="wrap-up">Wrap-up</h1>
<p>Which chart do you like best for the “sources of information” data in the PMA COVID-19 survey? Let us know what you think in the comments below, or reach out to us at the <a href="https://twitter.com/ipumsGH">brand new IPUMS Global Health Twitter account</a>!</p>
<p>Join us again in two weeks, when we’ll be wrapping up our series on the PMA COVID-19 survey with a tutorial showing how to connect it with data from the 2020 baseline survey.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="disqus-comments">
      <i class="fas fa-comments"></i>
      &nbsp;
      <span class="disqus-comment-count" data-disqus-identifier="posts/2021-08-01-covid-batches/">Comment on this article</span>
    </span>
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Three%20ways%20to%20visualize%20binary%20survey%20data&amp;url=https%3A%2F%2Fipums.github.io%2Fpma-data-hub%2Fposts%2F2021-08-01-covid-batches%2F" aria-label="share on twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fipums.github.io%2Fpma-data-hub%2Fposts%2F2021-08-01-covid-batches%2F&amp;title=Three%20ways%20to%20visualize%20binary%20survey%20data" aria-label="share on linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
    </span>
  </p>
  <script id="dsq-count-scr" src="https://pma-data-hub.disqus.com/count.js" async></script>
  <div id="disqus_thread" class="hidden"></div>
  <script type="text/javascript" cookie-consent="functionality">
var disqus_config = function () {
  this.page.url = 'https://ipums.github.io/pma-data-hub/posts/2021-08-01-covid-batches/';
  this.page.identifier = 'posts/2021-08-01-covid-batches/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://pma-data-hub.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/ipums/pma-data-hub/issues/new">create an issue</a> on the source repository.</p>
</div>
<!--/radix_placeholder_appendices-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<!--radix_placeholder_navigation_after_body--><html><body>
<div class="distill-site-nav distill-site-footer">
<p>Developed by <a href="https://www.ipums.org">IPUMS</a> at the
University of Minnesota</p>
<p>Licensed under the
<a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License
Version 2.0</a></p>
<p>Site built with <a href="https://rstudio.github.io/distill/">Distill
for R Markdown</a></p>
</div>
<!--/radix_placeholder_navigation_after_body-->
</body></html>


</body>

</html>
