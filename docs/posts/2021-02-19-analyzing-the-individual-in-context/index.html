<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Data Analysis Hub: Putting It All Together: Analyzing the Individual in Context</title>

<meta property="description" itemprop="description" content="Analyzing women&#39;s contraceptive use while considering service delivery point and spatial contextual factors."/>

<link rel="canonical" href="https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/"/>
<link rel="icon" type="image/png" href="../../images/favicon/favicon-32x32.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-03-02"/>
<meta property="article:created" itemprop="dateCreated" content="2021-03-02"/>
<meta name="article:author" content="Nina Brooks"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Data Analysis Hub: Putting It All Together: Analyzing the Individual in Context"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Analyzing women&#39;s contraceptive use while considering service delivery point and spatial contextual factors."/>
<meta property="og:url" content="https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/"/>
<meta property="og:image" content="https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/images/results.png"/>
<meta property="og:image:width" content="1950"/>
<meta property="og:image:height" content="1199"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Data Analysis Hub"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Data Analysis Hub: Putting It All Together: Analyzing the Individual in Context"/>
<meta property="twitter:description" content="Analyzing women&#39;s contraceptive use while considering service delivery point and spatial contextual factors."/>
<meta property="twitter:url" content="https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/"/>
<meta property="twitter:image" content="https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/images/results.png"/>
<meta property="twitter:image:width" content="1950"/>
<meta property="twitter:image:height" content="1199"/>
<meta property="twitter:site" content="@ipumsGH"/>

<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Can family planning programs reduce high desired family size in Sub-Saharan Africa?;citation_publication_date=2011;citation_volume=37;citation_doi=10.1363/3720911;citation_issn=1944-0405 1944-0391;citation_author=John Bongaarts"/>
  <meta name="citation_reference" content="citation_title=A practitioner’s guide to cluster-robust inference;citation_publication_date=2015;citation_volume=50;citation_author=A. Colin Cameron;citation_author=Douglas L. Miller"/>
  <meta name="citation_reference" content="citation_title=Scaling regression inputs by dividing by two standard deviations;citation_publication_date=2008;citation_volume=27;citation_doi=10.1002/sim.3107;citation_issn=02776715, 10970258;citation_author=Andrew Gelman"/>
  <meta name="citation_reference" content="citation_title=Complex surveys: A guide to analysis using R;citation_publication_date=2011;citation_publisher=John Wiley &amp; Sons;citation_author=Thomas Lumley"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","categories","date","output","preview","bibliography","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Putting It All Together: Analyzing the Individual in Context"]},{"type":"character","attributes":{},"value":["Analyzing women's contraceptive use while considering service delivery point and spatial contextual factors."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","url"]}},"value":[{"type":"character","attributes":{},"value":["Nina Brooks"]},{"type":"character","attributes":{},"value":["IPUMS PMA Postdoctoral Associate"]},{"type":"character","attributes":{},"value":["http://www.ninarbrooks.com/"]}]}]},{"type":"character","attributes":{},"value":["Individuals in Context","Service Delivery Points","Data Analysis","survey","dotwhisker"]},{"type":"character","attributes":{},"value":["3/2/21"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["images/results.png"]},{"type":"character","attributes":{},"value":["analysis.bib"]},{"type":"character","attributes":{},"value":["https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["analysis.bib","analyzing-the-individual-in-context_files/anchor-4.2.2/anchor.min.js","analyzing-the-individual-in-context_files/bowser-1.9.3/bowser.min.js","analyzing-the-individual-in-context_files/distill-2.2.21/template.v2.js","analyzing-the-individual-in-context_files/figure-html5/l-1.png","analyzing-the-individual-in-context_files/figure-html5/l-body-outset-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-10-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-11-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-12-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-13-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-14-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-15-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-16-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-17-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-18-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-19-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-3-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-4-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-5-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-6-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-7-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-8-1.png","analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-9-1.png","analyzing-the-individual-in-context_files/font-awesome-5.13.0/css/all.min.css","analyzing-the-individual-in-context_files/font-awesome-5.13.0/css/v4-shims.min.css","analyzing-the-individual-in-context_files/font-awesome-5.13.0/js/script.js","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-brands-400.eot","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-brands-400.svg","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-brands-400.ttf","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-brands-400.woff","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-brands-400.woff2","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-regular-400.eot","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-regular-400.svg","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-regular-400.ttf","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-regular-400.woff","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-regular-400.woff2","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-solid-900.eot","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-solid-900.svg","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-solid-900.ttf","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-solid-900.woff","analyzing-the-individual-in-context_files/font-awesome-5.13.0/webfonts/fa-solid-900.woff2","analyzing-the-individual-in-context_files/header-attrs-2.6/header-attrs.js","analyzing-the-individual-in-context_files/header-attrs-2.7/header-attrs.js","analyzing-the-individual-in-context_files/jquery-1.11.3/jquery.min.js","analyzing-the-individual-in-context_files/popper-2.6.0/popper.min.js","analyzing-the-individual-in-context_files/tippy-6.2.7/tippy-bundle.umd.min.js","analyzing-the-individual-in-context_files/tippy-6.2.7/tippy-light-border.css","analyzing-the-individual-in-context_files/tippy-6.2.7/tippy.css","analyzing-the-individual-in-context_files/tippy-6.2.7/tippy.umd.min.js","analyzing-the-individual-in-context_files/webcomponents-2.0.0/webcomponents.js","data/bf_merged.rds","data/int.rds","data/pma_00018.dat.gz","data/pma_00018.xml","images/results.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

</style>

<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
            .filter(function(item) { return !!item.description; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description}
                </div>
                <div class="search-item-preview">
                  <img src="${suggestion.preview ? offsetURL(suggestion.preview) : ''}"</img>
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */

@import url('https://assets.ipums.org/_css/font-faces.css');

html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #00263A;
  --header-color:    #00263A;
  --body-color:      #00263A;
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    cabrito_sans_norm_regular;
  --mono-font:       Menlo, Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-font:       cabrito_sans_norm_regular;
  --navbar-font:     cabrito_sans_norm_regular;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #00263A;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #00263A;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

h1{
  font-family: 'cabrito_sans_norm_regular';
  text-transform: uppercase;
  color: #00263A;
}

d-title h1{
  font-weight: 500;
}

d-article h1{
  font-size: 36px;
  line-height: 1.1em;
  font-weight: 100;
}

d-article h2{
    font-size: 30px;
    font-family: "cabrito_sans_cond_demi";
    text-transform: uppercase;
    color: #00263A;
    font-weight: 100;
}

d-article h3{
  font-size: 26px;
  font-family: 'cabrito_sans_cond_demi';
  color: #00263A;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article h4{
  font-size: 24px;
  font-family: 'cabrito_sans_norm_regular';
  color: #00263A;
  text-transform: unset;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article h5{
  font-size: 24px;
  font-family: 'cabrito_sans_cond_demi';
  color: #00263A;
  margin-top: 1.5rem;
  margin-bottom: 1em;
  font-weight: 100;
}

d-article li {
    margin-bottom: 0;
    margin-left: 1rem;
    padding-left: 0;
    color: #00263A;
}

d-article table {
    color: #00263A;
}
.d-contents nav > ul > li > a {
    font-weight: 100;
}

body{
  font-family: 'cabrito_subset';
}

b, strong {
  font-family: "cabrito_sans_cond_demi";
  font-weight: 100;
}

p>a {
    color: #98579B
}

li>a {
    color: #98579B;
}

.btn {
    font-family: "cabrito_subset";
    font-size: 16px;
    background-color: #F0E6F0;
    margin-bottom: 20px;
    border-width: 1px;
    padding-top: 6px;
    padding-bottom: 6px;
    cursor: pointer;
}

.distill-site-header .title {
    text-transform: uppercase;
    line-height: 38px;
    vertical-align: middle;
}

.distill-site-header .logo img{
  max-height: 50px; /* Makes logo bigger, default was 20px */
  vertical-align: middle;
  margin-bottom: 0;
}

.distill-site-header .nav-right {
    float: right;
    line-height: 38px;
    vertical-align: middle;
}

.distill-site-header .nav-left {
    display: inline-block;
    line-height: 38px;
    vertical-align: middle;
}

.algolia-autocomplete {
  line-height: 25px;
}

d-article iframe {
    border: 0;
    margin-bottom: 0;
    width: 100%;
}

d-article aside a {
  color: #98579B;
}

@media(max-width: 767px){
  aside{
    width: 50%;
    position: relative;
    left: 25%;
    padding-bottom: 20px;
  }
}

code {
  font-family: Menlo, Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
	font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
/* only text inside of <p> tags */
d-article > p {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}

/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
	font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
	font-size: var(--aside-size, 12px);
	color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
	font-size: var(--fig-cap-size, 13px);
	color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
	font-size: var(--heading-size, 0.6rem);
	color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
	font-size: var(--body-size, 0.8rem);
	color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
	color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
	font-size: var(--heading-size, 18px);
}

.d-contents nav a {
	font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
	color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
	color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
	color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
	font-size: var(--title-size, 18px);
	font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a:hover {
	color: var(--hover-color, white);
}

.distill-site-header {
	font-size: var(--text-size, 15px);
	color: var(--text-color, rgba(255, 255, 255, 0.8));
	background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
	font-size: var(--text-size, 15px);
	color: var(--text-color, rgba(255, 255, 255, 0.8));
	background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
	color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.6/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-191039907-2"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-191039907-2');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Putting It All Together: Analyzing the Individual in Context","description":"Analyzing women's contraceptive use while considering service delivery point and spatial contextual factors.","authors":[{"author":"Nina Brooks","authorURL":"http://www.ninarbrooks.com/","affiliation":"IPUMS PMA Postdoctoral Associate","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-03-02T00:00:00.000+00:00","citationText":"Brooks, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://pma.ipums.org/pma/">
<img src="../../images/logo-white.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Data Analysis Hub</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Posts</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Courses
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../introduction.html">Introduction to IPUMS PMA Data Analysis</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
R Tips
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../posts/2020-12-10-get-ipums-pma-data/index.html">Import IPUMS PMA Data into R</a>
<a href="../../posts/2020-12-10-get-r-and-packages/index.html">R, RStudio, and R Packages</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Community
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../CONTRIBUTING.html">Contributing guide</a>
<a href="../../CODE_OF_CONDUCT.html">Code of conduct</a>
<a href="../../LICENSE.html">License</a>
<a href="https://github.com/ipums/pma-data-hub/">GitHub</a>
</div>
</div>
<a href="../../about.html">About</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="https://twitter.com/ipumsGH">
<i class="fab fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/ipums/pma-data-hub" aria-label="Link to source">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Putting It All Together: Analyzing the Individual in Context</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:Individuals_in_Context" class="dt-tag">Individuals in Context</a>
  <a href="../../index.html#category:Service_Delivery_Points" class="dt-tag">Service Delivery Points</a>
  <a href="../../index.html#category:Data_Analysis" class="dt-tag">Data Analysis</a>
  <a href="../../index.html#category:survey" class="dt-tag">survey</a>
  <a href="../../index.html#category:dotwhisker" class="dt-tag">dotwhisker</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Analyzing women’s contraceptive use while considering service delivery point and spatial contextual factors.</p></p>
</div>

<div class="d-byline">
  Nina Brooks <a href="http://www.ninarbrooks.com/" class="uri">http://www.ninarbrooks.com/</a> (IPUMS PMA Postdoctoral Associate)
  
<br/>3/2/21
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#setup-load-packages-and-data">Setup: Load Packages and Data</a></li>
<li><a href="#recoding-covariates">Recoding covariates</a></li>
<li><a href="#regression-models">Regression Models</a>
<ul>
<li><a href="#individual-factors-model-with-glm">Individual factors: model with glm</a></li>
<li><a href="#individual-factors-model-with-svyglm">Individual factors: model with svyglm</a></li>
<li><a href="#availabillity-modeling-with-sdp-variables">Availabillity: modeling with SDP variables</a></li>
<li><a href="#accessibility-modeling-with-external-spatial-variables">Accessibility: modeling with external spatial variables</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>Throughout our series on <a href="../../index.html#category:Individuals_in_Context">Individuals in Context</a>, we’ve been looking at PMA Service Delivery Point (SDP) data as a resource for understanding the health services environment experienced by women surveyed in PMA Household and Female samples. We <a href="../2021-01-28-summarize-by-easerved/index.html">created summary variables</a> that capture the SDPs that provide services within the same <a href="../2021-01-26-sdp-data/index.html#sample-design">enumeration areas</a> PMA uses to construct samples of individuals. We’ve also shown how to complement SDP data with additional information about women’s lived environment collected from <a href="../2021-02-04-merging-external-spatial-data/">external geospatial data</a> sources.</p>
<p>In this final post, we’ll bring everything together and demonstrate the kind of analysis you might want to do with the contextual data we’ve collected in this series. Specifically, we’ll analyze women’s <strong>current contraceptive use</strong>, <a href="https://pma.ipums.org/pma-action/variables/FPCURRUSE">FPCURRUSE</a>, taking into account:</p>
<aside>
<code>FPCURRUSE</code> indicates whether a woman is currently using any method of family planning, or doing something to delay or avoid pregnancy.
</aside>
<ul>
<li><em>individual</em> factors about each woman collected in the Household and Female survey</li>
<li><em>availability</em> factors related to the supply of family planning services provided by SDPs in each woman’s enumeration area</li>
<li><em>accessibility</em> factors in each woman’s enumeration area - including measures of population density and transportation infrastructure - that we collected from external data sources</li>
</ul>
<p>The availability of both detailed individual data on family planning <em>and</em> supply-side (service delivery) factors is one of the unique advantages of the PMA data.</p>
<h1 id="setup-load-packages-and-data">Setup: Load Packages and Data</h1>
<p>We’ll load the packages <code>tidyverse</code> and <code>ipumsr</code>, as usual. Additionally, we’ll load <a href="https://www.tidymodels.org/">tidymodels</a>, which helps apply <code>tidyverse</code> principles to the models we’ll be building, and a few other packages we’ll discuss below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://www.ipums.org'>ipumsr</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidymodels.tidymodels.org'>tidymodels</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://r-survey.r-forge.r-project.org/survey/'>survey</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>dotwhisker</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We’ll be using both of the Burkina Faso datasets we created in earlier posts in this series:</p>
<ul>
<li><code>bf_merged</code> contains a handful of variables from each sampled woman <em>merged with</em> summary variables about the SDPs that serve her enumeration area (created in <a href="../2021-01-28-summarize-by-easerved">this post</a>).</li>
<li><code>int</code> contains population and road density variables for each enumeration area (created in <a href="../2021-02-04-merging-external-spatial-data">this post</a>).</li>
</ul>
<aside>
Remember, to use the GPS data you must request access directly from our partners at <a href="https://www.pmadata.org/data/about-data">pmadata.org</a>. The version of <code>int</code> we’re using in this post is based on the real GPS locations but the GPS data itself is not included.
</aside>
<p>As a reminder, let’s take a <a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a> at the variables we’ve currently got in each:</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>bf_merged</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 6,944
Columns: 10
$ EAID                &lt;dbl+lbl&gt; 7003, 7003, 7003, 7003, 7003, 7003,…
$ SAMPLE              &lt;int+lbl&gt; 85405, 85405, 85405, 85405, 85405, …
$ N_SDP               &lt;int&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …
$ NUM_METHODS_PROV    &lt;int&gt; 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,…
$ NUM_METHODS_INSTOCK &lt;int&gt; 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, …
$ NUM_METHODS_OUT3MO  &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ MEAN_OUTDAY         &lt;dbl&gt; NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,…
$ PERSONID            &lt;chr&gt; &quot;0700300000019732017504&quot;, &quot;070030000001…
$ URBAN               &lt;int+lbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ FPCURRUSE           &lt;int+lbl&gt; 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0,…</code></pre>
</div>
<p>The variables <code>N_SDP</code>, <code>NUM_METHODS_PROV</code>, <code>NUM_METHODS_INSTOCK</code>, <code>NUM_METHODS_OUT3MO</code>, <code>MEAN_OUTDAY</code>, and <code>URBAN</code> all describe the the enumeration area (<code>EAID</code>) where a woman identified by <code>PERSONID</code> resides. The only other variable from the Household and Female questionnaire, itself, is <code>FPCURRUSE</code>. We’ll add more variables describing each woman in a moment.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>int</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 83
Columns: 7
$ EAID        &lt;dbl&gt; 7003, 7006, 7009, 7016, 7026, 7042, 7048, 7056,…
$ ROAD_LENGTH &lt;dbl&gt; 30.29857, 28.87695, 24.08644, 41.92500, 67.6741…
$ PMACC       &lt;chr&gt; &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;, &quot;BF&quot;,…
$ PMAYEAR     &lt;dbl&gt; 2017, 2017, 2017, 2017, 2017, 2017, 2017, 2017,…
$ REGION      &lt;chr&gt; &quot;5. centre-nord&quot;, &quot;5. centre-nord&quot;, &quot;8. est&quot;, &quot;…
$ DATUM       &lt;chr&gt; &quot;WGS84&quot;, &quot;WGS84&quot;, &quot;WGS84&quot;, &quot;WGS84&quot;, &quot;WGS84&quot;, &quot;W…
$ POP_DENSITY &lt;dbl&gt; 74.04364, 51.75554, 15.66303, 91.25882, 416.232…</code></pre>
</div>
<p>We’ll be using <code>ROAD_LENGTH</code> and <code>POP_DENSITY</code>, but first we’ll need to merge <code>int</code> to <code>bf_merged</code> by matching up the <code>EAID</code> for each woman:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='fu'>left_join</span><span class='op'>(</span><span class='va'>bf_merged</span>, <span class='va'>int</span>, by <span class='op'>=</span> <span class='st'>"EAID"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Let’s now introduce some new variables obtained from each woman’s responses to the Household and Female questionnaire. We’ll merge a new data extract with the following variables collected from the Burkina Faso 2017 and 2018 surveys (female respondents only):</p>
<ul>
<li><a href="https://pma.ipums.org/pma-action/variables/AGE">AGE</a> - Age (in years)</li>
<li><a href="https://pma.ipums.org/pma-action/variables/MARSTAT">MARSTAT</a> - Marital status</li>
<li><a href="https://pma.ipums.org/pma-action/variables/EDUCATTGEN">EDUCATTGEN</a> - Highest level of school attended, general (4 categories)</li>
<li><a href="https://pma.ipums.org/pma-action/variables/WEALTHQ">WEALTHQ</a> - Wealth score quintile</li>
<li><a href="https://pma.ipums.org/pma-action/variables/BIRTHEVENT">BIRTHEVENT</a> - Number of birth events</li>
</ul>
<aside>
For a refresher on accessing and importing PMA data in R, check out our post <a href="../2020-12-10-get-ipums-pma-data/index.html">Import IPUMS PMA Data Into R</a>.
</aside>
<p>Following <a href="../2021-01-28-across-sdp/index.html#introducing-dplyracross">the practice</a> we used when we made <code>bf_merged</code>, we’ll simply handle all of the different non-response codes in this new extract by recoding them as <code>NA</code>. Then, we’ll merge the extract to <code>bf_merged</code> by matching up each person by <code>PERSONID</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='fu'>ipumsr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/read_ipums_micro.html'>read_ipums_micro</a></span><span class='op'>(</span>
  ddi <span class='op'>=</span> <span class='st'>"data/pma_00018.xml"</span>,
  data_file <span class='op'>=</span> <span class='st'>"data/pma_00018.dat.gz"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>PERSONID</span>, <span class='va'>AGE</span>, <span class='va'>MARSTAT</span>, <span class='va'>EDUCATTGEN</span>, <span class='va'>WEALTHQ</span>, <span class='va'>BIRTHEVENT</span>, <span class='va'>STRATA</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span><span class='fu'>across</span><span class='op'>(</span><span class='fu'><a href='https://tidyselect.r-lib.org/reference/everything.html'>everything</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_na_if.html'>lbl_na_if</a></span><span class='op'>(</span>
    <span class='va'>.x</span>,
    <span class='op'>~</span><span class='va'>.lbl</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
      <span class='st'>"Not interviewed (female questionnaire)"</span>,
      <span class='st'>"Not interviewed (household questionnaire)"</span>,
      <span class='st'>"Don't know"</span>,
      <span class='st'>"No response or missing"</span>,
      <span class='st'>"NIU (not in universe)"</span>
    <span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>right_join</span><span class='op'>(</span><span class='va'>bf_merged</span>, by <span class='op'>=</span> <span class='st'>"PERSONID"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="recoding-covariates">Recoding covariates</h1>
<p>All five of the new variables we’ve introduced are loaded into R as members of both the <code>integer</code> and the <code>haven_labelled</code> class of objects. But really, only <code>AGE</code> and <code>BIRTHEVENT</code> should be treated like <em>continuous</em> measures in our analysis. For <code>MARSTAT</code>, <code>EDUCATTGEN</code>, and <code>WEALTHQ</code>, the integer values associated with each response are arbitrary; we’re much more interested in the labels associated with these numeric values because each of these three variables reflects a <em>categorical</em> measurement.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>MARSTAT</span>, <span class='va'>EDUCATTGEN</span>, <span class='va'>WEALTHQ</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>map</span><span class='op'>(</span><span class='va'>class</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$MARSTAT
[1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;integer&quot;       

$EDUCATTGEN
[1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;integer&quot;       

$WEALTHQ
[1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;integer&quot;       </code></pre>
</div>
<p>As you might know, the normal way to handle <em>categorical</em> variables in a regression model is to create a <a href="https://en.wikipedia.org/wiki/Dummy_variable_(statistics)">binary dummy variable</a> associated with each response, and R normally performs this task automatically when it encounters a variable that’s a member of the <a href="https://r4ds.had.co.nz/factors.html">factor class</a>.</p>
<p>If we want, we can simply <a href="https://r4ds.had.co.nz/vectors.html?q=coercion#coercion">coerce</a> these variables as factors. When we do this and then use the factor in a regression model, R will select the <em>lowest numbered response</em> as a “reference group” and create binary dummy variables for the other responses. This makes sense with <code>WEALTHQ</code>, where we’d interpret the coefficient for each wealth quintile as an effect <em>relative to</em> being in the lowest quintile.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>WEALTHQ</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
                WEALTHQ     n
*             &lt;int+lbl&gt; &lt;int&gt;
1  1 [Lowest quintile]   1200
2  2 [Lower quintile]    1031
3  3 [Middle quintile]    984
4  4 [Higher quintile]   1253
5  5 [Highest quintile]  2474
6 NA                        2</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>WEALTHQ <span class='op'>=</span> <span class='fu'><a href='https://forcats.tidyverse.org/reference/as_factor.html'>as_factor</a></span><span class='op'>(</span><span class='va'>WEALTHQ</span><span class='op'>)</span><span class='op'>)</span> 

<span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>WEALTHQ</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 2
  WEALTHQ              n
* &lt;fct&gt;            &lt;int&gt;
1 Lowest quintile   1200
2 Lower quintile    1031
3 Middle quintile    984
4 Higher quintile   1253
5 Highest quintile  2474
6 &lt;NA&gt;                 2</code></pre>
</div>
<p>Alternatively, we might decide to make our own binary dummy variables. This makes sense when we might want to collapse several responses into one larger category, as with <code>MARSTAT</code>: here, for the purpose of analyzing <code>FPCURRUSE</code>, we probably only care about whether the woman is partnered (the reasons why she might not be partnered are less meaningful).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>MARSTAT</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5 x 2
                             MARSTAT     n
*                          &lt;int+lbl&gt; &lt;int&gt;
1 10 [Never married]                  1876
2 21 [Currently married]              4307
3 22 [Currently living with partner]   410
4 31 [Divorced or separated]           163
5 32 [Widow or widower]                188</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='va'>bf_merged</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>MARSTAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_relabel.html'>lbl_relabel</a></span><span class='op'>(</span>
      <span class='va'>MARSTAT</span>,
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl.html'>lbl</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='st'>"partnered"</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.val</span> <span class='op'>%in%</span> <span class='fl'>21</span><span class='op'>:</span><span class='fl'>22</span>,
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl.html'>lbl</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='st'>"unpartnered"</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.val</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>31</span>, <span class='fl'>32</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span> 

<span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>MARSTAT</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
          MARSTAT     n
*       &lt;dbl+lbl&gt; &lt;int&gt;
1 0 [unpartnered]  2227
2 1 [partnered]    4717</code></pre>
</div>
<p>Another reason to consider recoding categorical variables: what if one response option dominates a huge proportion of the responses in your data? Is it worth sacrificing additional <a href="https://en.wikipedia.org/wiki/Degrees_of_freedom_(statistics)">degrees of freedom</a> to accommodate dummy variables that could otherwise be merged together? This is the case with <code>EDUCATTGEN</code>, where over half of the responses are “never attended.” We’ll create a single, simplified binary variable where the responses are “some schooling” or “no schooling.”</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>EDUCATTGEN</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 5 x 2
                    EDUCATTGEN     n
*                    &lt;int+lbl&gt; &lt;int&gt;
1  1 [Never attended]           3605
2  2 [Primary/Middle school]    1212
3  3 [Secondary/post-primary]   1893
4  4 [Tertiary/post-secondary]   231
5 NA                               3</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>EDUCATTGEN <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl_relabel.html'>lbl_relabel</a></span><span class='op'>(</span>
      <span class='va'>EDUCATTGEN</span>,
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl.html'>lbl</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='st'>"some schooling"</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.val</span> <span class='op'>%in%</span> <span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span>,
      <span class='fu'><a href='https://rdrr.io/pkg/ipumsr/man/lbl.html'>lbl</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='st'>"no school"</span><span class='op'>)</span> <span class='op'>~</span> <span class='va'>.val</span> <span class='op'>==</span> <span class='fl'>1</span>
  <span class='op'>)</span><span class='op'>)</span> 

<span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>EDUCATTGEN</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 2
           EDUCATTGEN     n
*           &lt;dbl+lbl&gt; &lt;int&gt;
1  0 [no school]       3605
2  1 [some schooling]  3336
3 NA                      3</code></pre>
</div>
<p>The last thing we’ll do here is coerce <code>SAMPLE</code> as a factor so that we can control for arbitrary differences caused by selection into the two samples (recall that our dataset contains two samples from Burkina Faso 2017 and 2018). Because the women in each <code>SAMPLE</code> were surveyed in two different years, this essentially operates like a survey-year fixed effect.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>mutate</span><span class='op'>(</span>SAMPLE <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>SAMPLE</span><span class='op'>)</span><span class='op'>)</span> 

<span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>SAMPLE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 2 x 2
  SAMPLE     n
* &lt;fct&gt;  &lt;int&gt;
1 85405   3556
2 85408   3388</code></pre>
</div>
<h1 id="regression-models">Regression Models</h1>
<p>We’re now ready to examine the relative effects <em>individual</em> factors on <code>FPCURRUSE</code> compared to the <em>availability</em> and <em>accessibility</em> of family planning services in each woman’s enumeration area. Let’s begin with a simple model containing the factors we added to the dataset above.</p>
<h2 id="individual-factors-model-with-glm">Individual factors: model with glm</h2>
<p>Most R users probably use the <em>generalized linear model</em> function <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/glm">glm</a> for this purpose. To keep our demonstration as simple as possible, we’ll fit a model using the Ordinary Least-Squares (OLS) method that <code>glm</code> adopts by default. We’ll use the <code>tidymodels</code> function <a href="https://broom.tidymodels.org/">broom::tidy</a> to clean up the output for our model’s coefficient estimates.</p>
<aside>
Recall that <code>FPCURRUSE</code> is a binary response (“yes” or “no”), so you might consider fitting a logit model by adding the argument <code>family = 'binomial'</code> to <code>glm()</code>.
</aside>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>m1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span><span class='op'>(</span>
  <span class='va'>FPCURRUSE</span> <span class='op'>~</span>
    <span class='va'>AGE</span> <span class='op'>+</span> 
    <span class='va'>MARSTAT</span> <span class='op'>+</span> 
    <span class='va'>EDUCATTGEN</span> <span class='op'>+</span> 
    <span class='va'>BIRTHEVENT</span>  <span class='op'>+</span> 
    <span class='va'>WEALTHQ</span> <span class='op'>+</span> 
    <span class='va'>SAMPLE</span>,
  data <span class='op'>=</span> <span class='va'>bf_merged</span>
<span class='op'>)</span>

<span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 5
   term                    estimate std.error statistic  p.value
   &lt;chr&gt;                      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)              0.0421   0.0260       1.62  1.06e- 1
 2 AGE                     -0.00280  0.000948    -2.95  3.17e- 3
 3 MARSTAT                  0.201    0.0145      13.9   5.21e-43
 4 EDUCATTGEN               0.159    0.0143      11.2   9.42e-29
 5 BIRTHEVENT               0.0289   0.00390      7.40  1.48e-13
 6 WEALTHQLower quintile    0.0319   0.0204       1.56  1.18e- 1
 7 WEALTHQMiddle quintile   0.0222   0.0208       1.07  2.85e- 1
 8 WEALTHQHigher quintile   0.0884   0.0198       4.46  8.25e- 6
 9 WEALTHQHighest quintile  0.166    0.0191       8.67  5.24e-18
10 SAMPLE85408              0.00515  0.0114       0.453 6.51e- 1</code></pre>
</div>
<p>Because the outcome (<code>FPCURRUSE</code>) is binary, this linear regression is a <strong>linear probability model</strong> and the coefficients on each term should be interpreted as a percentage point change in the probability of current family planning use.</p>
<p>For each of the binary dummy variables we created, the coefficient estimate shows how much the probability <code>FPCURRUSE == "yes"</code> increases if the value of the dummy variable is 1. For example, in <code>MARSTAT</code> the value 1 represents “partnered” women, while the value 0 represented “unpartnered” women. The coefficient on <code>MARSTAT</code> is 0.201, meaning our model predicts that <strong>being partnered is associated with an increase in the expected probability of family planning use by 0.201.</strong></p>
<p>Is this a meaningful difference? Consider that the mean of <code>FPCURRUSE</code> is 0.34: this is the probability you might use to guess a woman’s likelihood for using family planning if we didn’t have access to any other variables. Relative to that, an increase of 0.201 is pretty substantive.</p>
<p>What about the other coefficients? We also see a large increase in the probability of family planning use for women who have “some schooling,” and a smaller increase for those who have more children.</p>
<p>Notice what happened with <code>WEALTHQ</code>, the variable we coerced as a <code>factor</code> above. As expected, R created a binary dummy variable from each response option <em>except</em> the reference group, which is the “lowest quintile.” It’s important to remember that each of these dummy variables represents the effect a being in a particular quintile <em>relative to</em> the “lowest quintile.” These results show that family planning use increases with wealth, which is expected (although the effects don’t become large or statistically significant until we get to the “high” and “highest” income quintiles).</p>
<h2 id="individual-factors-model-with-svyglm">Individual factors: model with svyglm</h2>
<p>There is one problem with the model we created above: as we’ve discussed, PMA samples households randomly within the same enumeration area, and it’s likely that households located together will share many common features. This violates one of the basic assumptions of OLS regression, where we expect modeling errors to be uncorrelated <span class="citation" data-cites="Cameron2015">(<a href="#ref-Cameron2015" role="doc-biblioref">Cameron and Miller 2015</a>)</span>. To address this, we’ll need to use a model that allows us to specify the complexities of PMA survey design. A common approach uses the <a href="http://r-survey.r-forge.r-project.org/survey/">survey</a> package developed by Thomas Lumley.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<aside>
We’ll use the package <code>svyglm</code> to specify PMA survey design whenever we create analytic models on the PMA Data Analysis Hub!
</aside>
<p>Lumley’s modeling function <code>survey::svyglm</code> is similar to <code>glm</code>, except that it takes a special <code>design</code> argument where <code>glm</code> takes a <code>data</code> argument. We use the function <code>survey::svydesign</code> to specify the data, the cluster ids from <code>EAID</code>, and the sampling strata <code>STRATA</code> (if we were using the sample weights from <code>FQWEIGHT</code>, we could do that here, too):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>m2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svyglm.html'>svyglm</a></span><span class='op'>(</span>
  <span class='va'>FPCURRUSE</span> <span class='op'>~</span>
    <span class='va'>AGE</span> <span class='op'>+</span> 
    <span class='va'>MARSTAT</span> <span class='op'>+</span> 
    <span class='va'>EDUCATTGEN</span> <span class='op'>+</span> 
    <span class='va'>BIRTHEVENT</span>  <span class='op'>+</span> 
    <span class='va'>WEALTHQ</span> <span class='op'>+</span> 
    <span class='va'>SAMPLE</span>,
  design <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svydesign.html'>svydesign</a></span><span class='op'>(</span>
    ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>EAID</span>,
    strata <span class='op'>=</span> <span class='op'>~</span><span class='va'>STRATA</span>,
    data <span class='op'>=</span> <span class='va'>bf_merged</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 5
   term                    estimate std.error statistic  p.value
   &lt;chr&gt;                      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)              0.0421    0.0366      1.15  2.54e- 1
 2 AGE                     -0.00280   0.00114    -2.45  1.65e- 2
 3 MARSTAT                  0.201     0.0157     12.8   3.19e-20
 4 EDUCATTGEN               0.159     0.0167      9.53  2.13e-14
 5 BIRTHEVENT               0.0289    0.00405     7.13  6.41e-10
 6 WEALTHQLower quintile    0.0319    0.0244      1.31  1.95e- 1
 7 WEALTHQMiddle quintile   0.0222    0.0282      0.788 4.33e- 1
 8 WEALTHQHigher quintile   0.0884    0.0302      2.92  4.62e- 3
 9 WEALTHQHighest quintile  0.166     0.0283      5.86  1.30e- 7
10 SAMPLE85408              0.00515   0.0145      0.356 7.23e- 1</code></pre>
</div>
<p>To see how this impacts our model estimates, let’s visualize the confidence interval for each coefficient with <a href="https://cran.r-project.org/web/packages/dotwhisker/vignettes/dotwhisker-vignette.html">dotwhisker::dwplot</a>. We’ll use the same function a few times here, and we’ll want to repeat the same visual elements each time, so we’ll just wrap everything together in a custom function we’re calling <code>pma_dwplot()</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>pma_dwplot</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/pkg/dotwhisker/man/dwplot.html'>dwplot</a></span><span class='op'>(</span>
    <span class='fu'>bind_rows</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span>,
    dodge_size <span class='op'>=</span> <span class='fl'>0.8</span>,
    vline <span class='op'>=</span> <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0</span>, colour <span class='op'>=</span> <span class='st'>"grey60"</span>, linetype <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>scale_color_viridis_d</span><span class='op'>(</span>option <span class='op'>=</span> <span class='st'>"plasma"</span>, end <span class='op'>=</span> <span class='fl'>.7</span><span class='op'>)</span> <span class='op'>+</span>
    <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'>pma_dwplot</span><span class='op'>(</span>
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"glm"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"svyglm"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<p>We can see from this plot that the confidence intervals obtained from <code>svyglm</code> are <em>wider than</em> those we got from <code>glm</code>, but the point estimates for each coefficient are unchanged. We also added a dashed line at 0 to make it really easy to see when coefficients are statistically insignificant at the 5% level (if so, the “whiskers” of a 95% confidence interval will cross 0).</p>
<h2 id="availabillity-modeling-with-sdp-variables">Availabillity: modeling with SDP variables</h2>
<p>While these individual factors are important, we should also expect the availability and accessibility of family planning services to partially determine their use <span class="citation" data-cites="Bongaarts2011">(<a href="#ref-Bongaarts2011" role="doc-biblioref">Bongaarts 2011</a>)</span>. Back in an <a href="../2021-01-28-summarize-by-easerved/index.html#merging-to-household-and-female-data">earlier post</a>, we observed that the women in our sample appeared to be 5% more likely to use family planning if they lived in an enumeration area where no SDPs reported a recent contraceptive stockout, compared to women living in areas where at least one SDP did experience a recent stockout. Now we’ll see if that difference is <em>statistically significant</em>, controlling for other factors.</p>
<aside>
For our purposes, a “recent stockout” is a stockout of any contraceptive method normally provided by an SDP if the stockout occurred within 3 months prior to the survey.
</aside>
<p>First, we’ll create a binary variable <code>STOCKOUT</code> indicating whether each woman lives in an enumeration area where at least one SDP reported a recent stockout:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bf_merged</span> <span class='op'>&lt;-</span> <span class='va'>bf_merged</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>STOCKOUT <span class='op'>=</span> <span class='fu'>case_when</span><span class='op'>(</span>
    <span class='va'>NUM_METHODS_OUT3MO</span> <span class='op'>&gt;</span> <span class='fl'>0</span> <span class='op'>~</span> <span class='fl'>1</span>,
    <span class='va'>NUM_METHODS_OUT3MO</span> <span class='op'>==</span> <span class='fl'>0</span> <span class='op'>~</span> <span class='fl'>0</span>
  <span class='op'>)</span><span class='op'>)</span>

<span class='va'>bf_merged</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='va'>STOCKOUT</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 3 x 2
  STOCKOUT     n
*    &lt;dbl&gt; &lt;int&gt;
1        0  4561
2        1  1725
3       NA   658</code></pre>
</div>
<p>Next, we’ll add <code>STOCKOUT</code> to our previous model, along with <code>NUM_METHODS_PROV</code> (the number of methods available from at least one SDP serving the woman’s enumeration area) and <code>N_SDP</code> (the number of sampled SDPs serving the woman’s enumeration area).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>m3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svyglm.html'>svyglm</a></span><span class='op'>(</span>
  <span class='va'>FPCURRUSE</span> <span class='op'>~</span>
    <span class='va'>AGE</span> <span class='op'>+</span> 
    <span class='va'>MARSTAT</span> <span class='op'>+</span> 
    <span class='va'>EDUCATTGEN</span> <span class='op'>+</span> 
    <span class='va'>BIRTHEVENT</span>  <span class='op'>+</span> 
    <span class='va'>WEALTHQ</span> <span class='op'>+</span> 
    <span class='va'>SAMPLE</span> <span class='op'>+</span> 
    <span class='va'>STOCKOUT</span> <span class='op'>+</span> 
    <span class='va'>NUM_METHODS_PROV</span> <span class='op'>+</span> 
    <span class='va'>N_SDP</span>,
  design <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svydesign.html'>svydesign</a></span><span class='op'>(</span>
    ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>EAID</span>,
    strata <span class='op'>=</span> <span class='op'>~</span><span class='va'>STRATA</span>,
    data <span class='op'>=</span> <span class='va'>bf_merged</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 13 x 5
   term                     estimate std.error statistic  p.value
   &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)              0.113      0.105      1.08   2.85e- 1
 2 AGE                     -0.00249    0.00114   -2.19   3.23e- 2
 3 MARSTAT                  0.201      0.0161    12.5    1.94e-19
 4 EDUCATTGEN               0.168      0.0169     9.93   6.35e-15
 5 BIRTHEVENT               0.0272     0.00414    6.57   7.77e- 9
 6 WEALTHQLower quintile    0.0380     0.0244     1.56   1.24e- 1
 7 WEALTHQMiddle quintile   0.0211     0.0287     0.736  4.64e- 1
 8 WEALTHQHigher quintile   0.0879     0.0300     2.93   4.58e- 3
 9 WEALTHQHighest quintile  0.162      0.0270     6.02   7.55e- 8
10 SAMPLE85408              0.000951   0.0175     0.0542 9.57e- 1
11 STOCKOUT                -0.0444     0.0206    -2.16   3.44e- 2
12 NUM_METHODS_PROV        -0.00199    0.0104    -0.192  8.48e- 1
13 N_SDP                   -0.0165     0.0120    -1.38   1.72e- 1</code></pre>
</div>
<p>Indeed, women living in an enumeration area where we’re aware of recent stockouts are less likely to be currently using family planning! The effect isn’t quite as large as some of the individual level factors we’ve examined, but it <em>is</em> statistically significant (p &lt; 0.05).</p>
<p>Does the introduction of SDP variables change our estimates for the individual factors we examined previously? A new <code>dwplot</code> seems to show little difference:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>pma_dwplot</span><span class='op'>(</span>
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"Individual-only"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m3</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"SDP + Individual"</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<p><img src="analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-18-1.png" width="624" /></p>
</div>
<h2 id="accessibility-modeling-with-external-spatial-variables">Accessibility: modeling with external spatial variables</h2>
<p>Availability of family planning methods (or lack thereof) is not the same as accessibility. The variables we created in our <a href="../2021-02-04-merging-external-spatial-data/">last post</a> using external geospatial data allow us to explore some factors related to <em>accessibility</em>, which is what we’ll add now. We’ll complement these external variables with <code>URBAN</code>, indicating whether the woman lives in an urban area.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>m4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svyglm.html'>svyglm</a></span><span class='op'>(</span>
  <span class='va'>FPCURRUSE</span> <span class='op'>~</span>
    <span class='va'>AGE</span> <span class='op'>+</span> 
    <span class='va'>MARSTAT</span> <span class='op'>+</span> 
    <span class='va'>EDUCATTGEN</span> <span class='op'>+</span> 
    <span class='va'>BIRTHEVENT</span>  <span class='op'>+</span> 
    <span class='va'>WEALTHQ</span> <span class='op'>+</span> 
    <span class='va'>SAMPLE</span> <span class='op'>+</span> 
    <span class='va'>STOCKOUT</span> <span class='op'>+</span> 
    <span class='va'>NUM_METHODS_PROV</span> <span class='op'>+</span> 
    <span class='va'>N_SDP</span> <span class='op'>+</span> 
    <span class='va'>POP_DENSITY</span> <span class='op'>+</span> 
    <span class='va'>ROAD_LENGTH</span> <span class='op'>+</span> 
    <span class='va'>URBAN</span>,
  design <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/survey/man/svydesign.html'>svydesign</a></span><span class='op'>(</span>
    ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>EAID</span>,
    strata <span class='op'>=</span> <span class='op'>~</span><span class='va'>STRATA</span>,
    data <span class='op'>=</span> <span class='va'>bf_merged</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m4</span><span class='op'>)</span> 
</code></pre>
</div>
<pre><code># A tibble: 16 x 5
   term                       estimate  std.error statistic  p.value
   &lt;chr&gt;                         &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)              0.0833     0.117         0.712  4.79e- 1
 2 AGE                     -0.00303    0.00112      -2.71   8.61e- 3
 3 MARSTAT                  0.210      0.0157       13.4    1.97e-20
 4 EDUCATTGEN               0.162      0.0174        9.30   1.28e-13
 5 BIRTHEVENT               0.0284     0.00417       6.82   3.41e- 9
 6 WEALTHQLower quintile    0.0343     0.0249        1.38   1.72e- 1
 7 WEALTHQMiddle quintile   0.0124     0.0291        0.426  6.72e- 1
 8 WEALTHQHigher quintile   0.0405     0.0312        1.30   1.99e- 1
 9 WEALTHQHighest quintile  0.0734     0.0384        1.91   6.07e- 2
10 SAMPLE85408              0.00133    0.0179        0.0744 9.41e- 1
11 STOCKOUT                -0.0483     0.0211       -2.29   2.53e- 2
12 NUM_METHODS_PROV        -0.00225    0.0104       -0.216  8.30e- 1
13 N_SDP                   -0.0158     0.0124       -1.27   2.09e- 1
14 POP_DENSITY             -0.00000144 0.00000522   -0.276  7.83e- 1
15 ROAD_LENGTH              0.00110    0.00144       0.760  4.50e- 1
16 URBAN                    0.0773     0.0370        2.09   4.03e- 2</code></pre>
<div class="sourceCode">
<pre><code><span class='fu'>pma_dwplot</span><span class='op'>(</span>
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"Individual-only"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m3</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"SDP + Individual"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m4</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"All"</span><span class='op'>)</span>
<span class='op'>)</span> 
</code></pre>
</div>
<p><img src="analyzing-the-individual-in-context_files/figure-html5/unnamed-chunk-19-1.png" width="624" /></p>
</div>
<p>This figure with all three models reveals that marital status, education, number of births, and living in an enumeration area that faced recent stockouts are all significantly associated with current family planning use. However, it’s pretty difficult to compare the effects across all the variables. The coefficients on age, population density, and road length are particularly hard to examine and compare. <code>dotwhisker</code> includes a very handy function that re-scales continuous variables on the right-hand side of your regression model to make them more comparable to binary predictors. Specifically, <code>dotwhisker::by_2sd()</code> re-scales continuous input variables by 2 standard deviations following Gelman <span class="citation" data-cites="Gelman2008">(<a href="#ref-Gelman2008" role="doc-biblioref">2008</a>)</span>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>While we’re adding some last touches to make the plot more readable, we’ll also provide a title, clearer variable names on the Y axis, a tighter scale on the X axis, and a caption at the bottom.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m2</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"Individual-only"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m3</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"SDP + Individual"</span><span class='op'>)</span>,
  <span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m4</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"All"</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>map</span><span class='op'>(</span><span class='op'>~</span><span class='fu'><a href='https://rdrr.io/pkg/dotwhisker/man/by_2sd.html'>by_2sd</a></span><span class='op'>(</span><span class='va'>.x</span>, <span class='va'>bf_merged</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>bind_rows</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/dotwhisker/man/relabel_predictors.html'>relabel_predictors</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
      AGE <span class='op'>=</span> <span class='st'>"Age"</span>,  
      MARSTAT <span class='op'>=</span> <span class='st'>"Married"</span>, 
      EDUCATTGEN <span class='op'>=</span> <span class='st'>"Some Schooling"</span>, 
      BIRTHEVENT <span class='op'>=</span> <span class='st'>"No. of Children"</span>,
      `WEALTHQLower quintile` <span class='op'>=</span> <span class='st'>"Lower Wealth Quintile"</span>, 
      `WEALTHQMiddle quintile` <span class='op'>=</span> <span class='st'>"Middle Wealth Quintile"</span>,
      `WEALTHQHigher quintile` <span class='op'>=</span> <span class='st'>"Higher Wealth Quintile"</span>, 
      `WEALTHQHighest quintile` <span class='op'>=</span> <span class='st'>"Highest Wealth Quintile"</span>, 
      STOCKOUT <span class='op'>=</span> <span class='st'>"Recent Stockout"</span>, 
      NUM_METHODS_PROV <span class='op'>=</span> <span class='st'>"No. of FP Methods"</span>,
      N_SDP <span class='op'>=</span> <span class='st'>"No. of SDP Providers"</span>,
      POP_DENSITY <span class='op'>=</span> <span class='st'>"Population Density (w/i 10 km)"</span>,
      ROAD_LENGTH <span class='op'>=</span> <span class='st'>"Road length (w/i 10 km)"</span>,
      URBAN <span class='op'>=</span> <span class='st'>"Lives in Urban EA"</span>,
      SAMPLE85408 <span class='op'>=</span> <span class='st'>"2018 Sample"</span>
    <span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/dotwhisker/man/dwplot.html'>dwplot</a></span><span class='op'>(</span>
    dodge_size <span class='op'>=</span> <span class='fl'>0.8</span>,
    vline <span class='op'>=</span> <span class='fu'>geom_vline</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='fl'>0</span>, colour <span class='op'>=</span> <span class='st'>"grey60"</span>, linetype <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>scale_color_viridis_d</span><span class='op'>(</span>option <span class='op'>=</span> <span class='st'>"plasma"</span>, end <span class='op'>=</span> <span class='fl'>.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>
    x <span class='op'>=</span> <span class='st'>"Coefficient"</span>,
    color <span class='op'>=</span> <span class='cn'>NULL</span>,
    title <span class='op'>=</span> <span class='st'>"Marital Status Is the Strongest Predictor of Family Planning Use"</span>,
    subtitle <span class='op'>=</span> <span class='st'>"Impact of Individual and Contextual Factors on Family Planning Use"</span>,
    caption <span class='op'>=</span> <span class='st'>"Source: IPUMS PMA (Burkina Faso 2017-2018), DIVA-GIS (road length), and WorldPop (population density)"</span>
  <span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_x_continuous</span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.1</span>, <span class='fl'>0.3</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span> <span class='co'># to make space for the legend</span>
  <span class='fu'>theme</span><span class='op'>(</span>
    legend.position <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.8</span>, <span class='fl'>0.2</span><span class='op'>)</span>,
    title <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>8</span><span class='op'>)</span>,
    legend.text <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>8</span><span class='op'>)</span>,
    plot.caption <span class='op'>=</span> <span class='fu'>element_text</span><span class='op'>(</span>hjust <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>, <span class='co'>#left align the caption</span>
    legend.background <span class='op'>=</span> <span class='fu'>element_rect</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='st'>"grey80"</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
<p><img src="analyzing-the-individual-in-context_files/figure-html5/l-body-outset-1.png" width="624" /></p>
</div>
<p>Now that we’ve re-scaled the continuous input variables by two standard deviations, we can much more easily see the relationship between age and family planning use. Across all models a one-year increase in a woman’s age is associated with a five percentage point lower expected probability of using family planning. This effect is statistically significant at the 5% level in all three models as well.</p>
<p>The relationships we observed with marital status, education, and number of children are quite stable across all the models – even as we added variables representing the service environment and broader context of contraceptive availability the coefficients did not meaningfully change.</p>
<p>This is in pretty striking contrast to what happens to the wealth quintile variables. When we included only woman and SDP characteristics, being in either the higher and highest wealth quintiles was associated with large and statistically significant increases in the probability of using family planning. But as we added geospatial variables and the <code>URBAN</code> variable in particular, the coefficients become smaller and the confidence intervals become wider. This indicates that there was likely <strong>omitted variable bias</strong> because wealth is correlated with living in an urban area but when we excluded <code>URBAN</code> the wealth quintile variables were capturing some of this relationship with family planning use.</p>
<p>Even though this analysis was relatively simple, it was quite informative about different drivers of family planning use. You could easily extend this analysis to include other factors that influence family planning use, incorporate fixed or random effects, or take advantage of the multiple years of survey data!</p>
<p>As always, let us know if you have any questions on this post or if you’re working any fertility related analyses and you have a question that we can help address with the blog!</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-Bongaarts2011" class="csl-entry" role="doc-biblioentry">
Bongaarts, John. 2011. <span>“Can Family Planning Programs Reduce High Desired Family Size in <span>Sub</span>-<span>Saharan Africa</span>?”</span> <em>International Perspectives on Sexual and Reproductive Health</em> 37 (4): 209–16. <a href="https://doi.org/10.1363/3720911">https://doi.org/10.1363/3720911</a>.
</div>
<div id="ref-Cameron2015" class="csl-entry" role="doc-biblioentry">
Cameron, A. Colin, and Douglas L. Miller. 2015. <span>“A Practitioner’s Guide to Cluster-Robust Inference.”</span> <em>Journal of Human Resources</em> 50 (2): 317–72.
</div>
<div id="ref-Gelman2008" class="csl-entry" role="doc-biblioentry">
Gelman, Andrew. 2008. <span>“Scaling Regression Inputs by Dividing by Two Standard Deviations.”</span> <em>Statistics in Medicine</em> 27 (15): 2865–73. <a href="https://doi.org/10.1002/sim.3107">https://doi.org/10.1002/sim.3107</a>.
</div>
<div id="ref-Lumley2011" class="csl-entry" role="doc-biblioentry">
Lumley, Thomas. 2011. <em>Complex Surveys: A Guide to Analysis Using <span>R</span></em>. Wiley Series in Survey Methodology. John Wiley &amp; Sons.
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>We highly recommend Lumley’s <span class="citation" data-cites="Lumley2011">(<a href="#ref-Lumley2011" role="doc-biblioref">2011</a>)</span> book, <em>Complex Surveys: A Guide to Analysis Using R</em>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>We recommend checking out the full paper, but the short explanation is that with binary predictors you are comparing a value of <code>0</code> to a value of <code>1</code> when interpreting coefficients. A 1-unit change in a binary predictor is equivalent to a 2 standard deviation change because the standard deviation of a binary variable with equal probabilities is 0.5.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="disqus-comments">
      <i class="fas fa-comments"></i>
      &nbsp;
      <span class="disqus-comment-count" data-disqus-identifier="posts/2021-02-19-analyzing-the-individual-in-context/">Comment on this article</span>
    </span>
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Putting%20It%20All%20Together%3A%20Analyzing%20the%20Individual%20in%20Context&amp;url=https%3A%2F%2Fipums.github.io%2Fpma-data-hub%2Fposts%2F2021-02-19-analyzing-the-individual-in-context%2F">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fipums.github.io%2Fpma-data-hub%2Fposts%2F2021-02-19-analyzing-the-individual-in-context%2F&amp;title=Putting%20It%20All%20Together%3A%20Analyzing%20the%20Individual%20in%20Context">
        <i class="fab fa-linkedin"></i>
      </a>
    </span>
  </p>
  <script id="dsq-count-scr" src="https://pma-data-hub.disqus.com/count.js" async></script>
  <div id="disqus_thread" class="hidden"></div>
  <script>
var disqus_config = function () {
  this.page.url = 'https://ipums.github.io/pma-data-hub/posts/2021-02-19-analyzing-the-individual-in-context/';
  this.page.identifier = 'posts/2021-02-19-analyzing-the-individual-in-context/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://pma-data-hub.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/ipums/pma-data-hub/issues/new">create an issue</a> on the source repository.</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<div class="distill-site-nav distill-site-footer">
  <p>Developed by <a href="https://www.ipums.org">IPUMS</a> at the University of Minnesota</p>
  <p>Licensed under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License Version 2.0</a></p>
  <p>Site built with <a href="https://rstudio.github.io/distill/">Distill for R Markdown</a></p>
</div>
<!--/radix_placeholder_navigation_after_body-->


</body>

</html>
